{"version":3,"file":"store-hot-swap.js","names":["storeHotSwapPlugin","registry","pluginOptions","hotStores","dispatch","reducerKey","targetDispatch","indexOf","select","targetSelect","setEditor","resetEditor"],"sources":["../../../src/store/plugins/store-hot-swap.js"],"sourcesContent":["/**\n * Swap any access to `core/block-editor` to the currently focussed editor store. This ensures that blocks that directly access\n * wp.data still work.\n *\n * Note that store plugins are currently marked as deprecated. It's unknown what will replace them, and this will need to be updated\n * once that happens.\n *\n * @param {Object} registry\n * @param {Object} pluginOptions\n */\nfunction storeHotSwapPlugin( registry, pluginOptions ) {\n\tconst hotStores = [ 'core/block-editor', 'core/editor' ];\n\n\t// Switch select and dispatch\n\treturn {\n\t\tdispatch( reducerKey ) {\n\t\t\tif ( storeHotSwapPlugin.targetDispatch === null || hotStores.indexOf( reducerKey ) === -1 ) {\n\t\t\t\treturn registry.dispatch( reducerKey );\n\t\t\t}\n\n\t\t\treturn storeHotSwapPlugin.targetDispatch( reducerKey );\n\t\t},\n\t\tselect( reducerKey ) {\n\t\t\tif ( storeHotSwapPlugin.targetSelect === null || hotStores.indexOf( reducerKey ) === -1 ) {\n\t\t\t\treturn registry.select( reducerKey );\n\t\t\t}\n\n\t\t\treturn storeHotSwapPlugin.targetSelect( reducerKey );\n\t\t},\n\t};\n}\n\nstoreHotSwapPlugin.targetSelect = null;\nstoreHotSwapPlugin.targetDispatch = null;\n\nstoreHotSwapPlugin.setEditor = function ( select, dispatch ) {\n\tthis.targetSelect = select;\n\tthis.targetDispatch = dispatch;\n};\n\nstoreHotSwapPlugin.resetEditor = function () {\n\tthis.targetSelect = null;\n\tthis.targetDispatch = null;\n};\n\nexport default storeHotSwapPlugin;\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,kBAAT,CAA6BC,QAA7B,EAAuCC,aAAvC,EAAuD;EACtD,IAAMC,SAAS,GAAG,CAAE,mBAAF,EAAuB,aAAvB,CAAlB,CADsD,CAGtD;;EACA,OAAO;IACNC,QADM,oBACIC,UADJ,EACiB;MACtB,IAAKL,kBAAkB,CAACM,cAAnB,KAAsC,IAAtC,IAA8CH,SAAS,CAACI,OAAV,CAAmBF,UAAnB,MAAoC,CAAC,CAAxF,EAA4F;QAC3F,OAAOJ,QAAQ,CAACG,QAAT,CAAmBC,UAAnB,CAAP;MACA;;MAED,OAAOL,kBAAkB,CAACM,cAAnB,CAAmCD,UAAnC,CAAP;IACA,CAPK;IAQNG,MARM,kBAQEH,UARF,EAQe;MACpB,IAAKL,kBAAkB,CAACS,YAAnB,KAAoC,IAApC,IAA4CN,SAAS,CAACI,OAAV,CAAmBF,UAAnB,MAAoC,CAAC,CAAtF,EAA0F;QACzF,OAAOJ,QAAQ,CAACO,MAAT,CAAiBH,UAAjB,CAAP;MACA;;MAED,OAAOL,kBAAkB,CAACS,YAAnB,CAAiCJ,UAAjC,CAAP;IACA;EAdK,CAAP;AAgBA;;AAEDL,kBAAkB,CAACS,YAAnB,GAAkC,IAAlC;AACAT,kBAAkB,CAACM,cAAnB,GAAoC,IAApC;;AAEAN,kBAAkB,CAACU,SAAnB,GAA+B,UAAWF,MAAX,EAAmBJ,QAAnB,EAA8B;EAC5D,KAAKK,YAAL,GAAoBD,MAApB;EACA,KAAKF,cAAL,GAAsBF,QAAtB;AACA,CAHD;;AAKAJ,kBAAkB,CAACW,WAAnB,GAAiC,YAAY;EAC5C,KAAKF,YAAL,GAAoB,IAApB;EACA,KAAKH,cAAL,GAAsB,IAAtB;AACA,CAHD;;eAKeN,kB"}