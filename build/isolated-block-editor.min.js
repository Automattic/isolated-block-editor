/*! Isolated Block Editor v1.0.0 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["isolated-block-editor"]=t():e["isolated-block-editor"]=t()}(self,(function(){return(()=>{var e={228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},858:e=>{e.exports=function(e){if(Array.isArray(e))return e}},646:(e,t,n)=>{var r=n(228);e.exports=function(e){if(Array.isArray(e))return r(e)}},506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},926:e=>{function t(e,t,n,r,o,i,c){try{var s=e[i](c),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(o,i){var c=e.apply(n,r);function s(e){t(c,o,i,s,l,"next",e)}function l(e){t(c,o,i,s,l,"throw",e)}s(void 0)}))}}},575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},913:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},154:e=>{function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t},754:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},205:(e,t,n)=>{var r=n(489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},884:e=>{e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},64:e=>{e.exports=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}},479:(e,t,n)=>{var r=n(316);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(o=0;o<c.length;o++)n=c[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},316:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}},585:(e,t,n)=>{var r=n(8),o=n(506);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},489:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},38:(e,t,n)=>{var r=n(858),o=n(884),i=n(379),c=n(521);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||c()}},319:(e,t,n)=>{var r=n(646),o=n(860),i=n(379),c=n(206);e.exports=function(e){return r(e)||o(e)||i(e)||c()}},8:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},379:(e,t,n)=>{var r=n(228);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},367:function(e,t){var n,r,o;
/*!
	autosize 4.0.2
	license: MIT
	http://www.jacklmoore.com/autosize
*/r=[e,t],void 0===(o="function"==typeof(n=function(e,t){"use strict";var n,r,o="function"==typeof Map?new Map:(n=[],r=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return r[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),r.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),r.splice(t,1))}}),i=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function c(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!o.has(e)){var t=null,n=null,r=null,c=function(){e.clientWidth!==n&&d()},s=function(t){window.removeEventListener("resize",c,!1),e.removeEventListener("input",d,!1),e.removeEventListener("keyup",d,!1),e.removeEventListener("autosize:destroy",s,!1),e.removeEventListener("autosize:update",d,!1),Object.keys(t).forEach((function(n){e.style[n]=t[n]})),o.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",s,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",d,!1),window.addEventListener("resize",c,!1),e.addEventListener("input",d,!1),e.addEventListener("autosize:update",d,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",o.set(e,{destroy:s,update:d}),l()}function l(){var n=window.getComputedStyle(e,null);"vertical"===n.resize?e.style.resize="none":"both"===n.resize&&(e.style.resize="horizontal"),t="content-box"===n.boxSizing?-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),isNaN(t)&&(t=0),d()}function a(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function u(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function p(){if(0!==e.scrollHeight){var r=u(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",n=e.clientWidth,r.forEach((function(e){e.node.scrollTop=e.scrollTop})),o&&(document.documentElement.scrollTop=o)}}function d(){p();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),o="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(o<t?"hidden"===n.overflowY&&(a("scroll"),p(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(a("hidden"),p(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),r!==o){r=o;var c=i("autosize:resized");try{e.dispatchEvent(c)}catch(e){}}}}function s(e){var t=o.get(e);t&&t.destroy()}function l(e){var t=o.get(e);t&&t.update()}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((a=function(e){return e}).destroy=function(e){return e},a.update=function(e){return e}):((a=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return c(e,t)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e},a.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],l),e}),t.default=a,e.exports=t.default})?n.apply(t,r):n)||(e.exports=o)},184:(e,t)=>{var n;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var c=o.apply(null,n);c&&e.push(c)}else if("object"===i)for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},934:e=>{e.exports=function(e,t,n){return((n=window.getComputedStyle)?n(e):e.currentStyle)[t.replace(/-(\w)/gi,(function(e,t){return t.toUpperCase()}))]}},303:(e,t,n)=>{var r=n(934);e.exports=function(e){var t=r(e,"line-height"),n=parseFloat(t,10);if(t===n+""){var o=e.style.lineHeight;e.style.lineHeight=t+"em",t=r(e,"line-height"),n=parseFloat(t,10),o?e.style.lineHeight=o:delete e.style.lineHeight}if(-1!==t.indexOf("pt")?(n*=4,n/=3):-1!==t.indexOf("mm")?(n*=96,n/=25.4):-1!==t.indexOf("cm")?(n*=96,n/=2.54):-1!==t.indexOf("in")?n*=96:-1!==t.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===t){var i=e.nodeName,c=document.createElement(i);c.innerHTML="&nbsp;","TEXTAREA"===i.toUpperCase()&&c.setAttribute("rows","1");var s=r(e,"font-size");c.style.fontSize=s,c.style.padding="0px",c.style.border="0px";var l=document.body;l.appendChild(c),n=c.offsetHeight,l.removeChild(c)}return n}},703:(e,t,n)=>{"use strict";var r=n(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,c){if(c!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},857:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};t.__esModule=!0;var s=n(804),l=n(697),a=n(367),u=n(303),p="autosize:resized",d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={lineHeight:null},t.textarea=null,t.onResize=function(e){t.props.onResize&&t.props.onResize(e)},t.updateLineHeight=function(){t.textarea&&t.setState({lineHeight:u(t.textarea)})},t.onChange=function(e){var n=t.props.onChange;t.currentValue=e.currentTarget.value,n&&n(e)},t}return o(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.maxRows,r=t.async;"number"==typeof n&&this.updateLineHeight(),"number"==typeof n||r?setTimeout((function(){return e.textarea&&a(e.textarea)})):this.textarea&&a(this.textarea),this.textarea&&this.textarea.addEventListener(p,this.onResize)},t.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(p,this.onResize),a.destroy(this.textarea))},t.prototype.render=function(){var e=this,t=this.props,n=(t.onResize,t.maxRows),r=(t.onChange,t.style),o=(t.innerRef,t.children),l=c(t,["onResize","maxRows","onChange","style","innerRef","children"]),a=this.state.lineHeight,u=n&&a?a*n:null;return s.createElement("textarea",i({},l,{onChange:this.onChange,style:u?i({},r,{maxHeight:u}):r,ref:function(t){e.textarea=t,"function"==typeof e.props.innerRef?e.props.innerRef(t):e.props.innerRef&&(e.props.innerRef.current=t)}}),o)},t.prototype.componentDidUpdate=function(){this.textarea&&a.update(this.textarea)},t.defaultProps={rows:1,async:!1},t.propTypes={rows:l.number,maxRows:l.number,onResize:l.func,innerRef:l.any,async:l.bool},t}(s.Component);t.TextareaAutosize=s.forwardRef((function(e,t){return s.createElement(d,i({},e,{innerRef:t}))}))},42:(e,t,n)=>{"use strict";var r=n(857);t.Z=r.TextareaAutosize},950:(e,t)=>{"use strict";t.Z=function(e){var t=e.dispatch;return function(e){return function(n){return Array.isArray(n)?n.filter(Boolean).map(t):e(n)}}}},236:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionCreators=t.ActionTypes=void 0;var n={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};t.ActionTypes=n;var r={undo:function(){return{type:n.UNDO}},redo:function(){return{type:n.REDO}},jumpToFuture:function(e){return{type:n.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:n.JUMP_TO_PAST,index:e}},jump:function(e){return{type:n.JUMP,index:e}},clearHistory:function(){return{type:n.CLEAR_HISTORY}}};t.ActionCreators=r},823:(e,t)=>{"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e){r=e},t.start=function(e,t){void(o={header:[],prev:[],action:[],next:[],msgs:[]}),r&&(console.group?(o.header=["%credux-undo","font-style: italic","action",e.type],o.action=l("action",c,e),o.prev=l("prev history",i,t)):(o.header=["redux-undo action",e.type],o.action=["action",e],o.prev=["prev history",t]))},t.end=function(e){r&&(console.group?o.next=l("next history",s,e):o.next=["next history",e],function(){var e=o,t=e.header,r=e.prev,i=e.next,c=e.action,s=e.msgs;if(console.group){var l,a,u,p,d;(l=console).groupCollapsed.apply(l,n(t)),(a=console).log.apply(a,n(r)),(u=console).log.apply(u,n(c)),(p=console).log.apply(p,n(i)),(d=console).log.apply(d,n(s)),console.groupEnd()}else{var f,y,g,b,h;(f=console).log.apply(f,n(t)),(y=console).log.apply(y,n(r)),(g=console).log.apply(g,n(c)),(b=console).log.apply(b,n(i)),(h=console).log.apply(h,n(s))}}())},t.log=function(){if(r){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.msgs=o.msgs.concat([].concat(t,["\n"]))}};var i="#9E9E9E",c="#03A9F4",s="#4CAF50";function l(e,t,n){return["%c".concat(e),"color: ".concat(t,"; font-weight: bold"),n]}},619:(e,t)=>{"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActions=n,t.isHistory=function(e){return void 0!==e.present&&void 0!==e.future&&void 0!==e.past&&Array.isArray(e.future)&&Array.isArray(e.past)},t.includeAction=function(e){var t=n(e);return function(e){return t.indexOf(e.type)>=0}},t.excludeAction=function(e){var t=n(e);return function(e){return t.indexOf(e.type)<0}},t.combineFilters=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return function(n,r,o){return e(n,r,o)&&t(n,r,o)}}),(function(){return!0}))},t.groupByActionTypes=function(e){var t=n(e);return function(e){return t.indexOf(e.type)>=0?e.type:null}},t.newHistory=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{past:e,present:t,future:n,group:r,_latestUnfiltered:t,index:e.length,limit:e.length+n.length+1}}},90:(e,t,n)=>{"use strict";Object.defineProperty(t,"zF",{enumerable:!0,get:function(){return o.ActionCreators}}),Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return c.default}});var r,o=n(236),i=n(619),c=(r=n(123))&&r.__esModule?r:{default:r}},123:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.set(t.debug);var n,r=a({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:i.ActionTypes.UNDO,redoType:i.ActionTypes.REDO,jumpToPastType:i.ActionTypes.JUMP_TO_PAST,jumpToFutureType:i.ActionTypes.JUMP_TO_FUTURE,jumpType:i.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},t,{initTypes:(0,c.parseActions)(t.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,c.parseActions)(t.clearHistoryType,[i.ActionTypes.CLEAR_HISTORY])}),s=r.neverSkipReducer?function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return a({},t,{present:e.apply(void 0,[t.present,n].concat(o))})}:function(e){return e};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.start(i,t);for(var l,a=t,u=arguments.length,p=new Array(u>2?u-2:0),v=2;v<u;v++)p[v-2]=arguments[v];if(!n){if(o.log("history is uninitialized"),void 0===t){var m={type:"@@redux-undo/CREATE_HISTORY"},O=e.apply(void 0,[t,m].concat(p));return a=d(O,r.ignoreInitialState),o.log("do not set initialState on probe actions"),o.end(a),a}(0,c.isHistory)(t)?(a=n=r.ignoreInitialState?t:(0,c.newHistory)(t.past,t.present,t.future),o.log("initialHistory initialized: initialState is a history",n)):(a=n=d(t,r.ignoreInitialState),o.log("initialHistory initialized: initialState is not a history",n))}switch(i.type){case void 0:return a;case r.undoType:return l=b(a,-1),o.log("perform undo"),o.end(l),s.apply(void 0,[l,i].concat(p));case r.redoType:return l=b(a,1),o.log("perform redo"),o.end(l),s.apply(void 0,[l,i].concat(p));case r.jumpToPastType:return l=g(a,i.index),o.log("perform jumpToPast to ".concat(i.index)),o.end(l),s.apply(void 0,[l,i].concat(p));case r.jumpToFutureType:return l=y(a,i.index),o.log("perform jumpToFuture to ".concat(i.index)),o.end(l),s.apply(void 0,[l,i].concat(p));case r.jumpType:return l=b(a,i.index),o.log("perform jump to ".concat(i.index)),o.end(l),s.apply(void 0,[l,i].concat(p));case h(i.type,r.clearHistoryType):return l=d(a.present,r.ignoreInitialState),o.log("perform clearHistory"),o.end(l),s.apply(void 0,[l,i].concat(p));default:if(l=e.apply(void 0,[a.present,i].concat(p)),r.initTypes.some((function(e){return e===i.type})))return o.log("reset history due to init action"),o.end(n),n;if(a._latestUnfiltered===l)return a;var w="function"==typeof r.filter&&!r.filter(i,l,a);if(w){var E=(0,c.newHistory)(a.past,l,a.future,a.group);return r.syncFilter||(E._latestUnfiltered=a._latestUnfiltered),o.log("filter ignored action, not storing it in past"),o.end(E),E}var S=r.groupBy(i,l,a);if(null!=S&&S===a.group){var k=(0,c.newHistory)(a.past,l,a.future,a.group);return o.log("groupBy grouped the action with the previous action"),o.end(k),k}return a=f(a,l,r.limit,S),o.log("inserted new state into history"),o.end(a),a}}};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var c=o?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(823)),i=n(236),c=n(619);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){var n=(0,c.newHistory)([],e,[]);return t&&(n._latestUnfiltered=null),n}function f(e,t,n,r){var i=e.past.length+1;o.log("inserting",t),o.log("new free: ",n-i);var s=e.past,l=e._latestUnfiltered,a=n&&n<=i,u=s.slice(a?1:0),d=null!=l?[].concat(p(u),[l]):u;return(0,c.newHistory)(d,t,[],r)}function y(e,t){if(t<0||t>=e.future.length)return e;var n=e.past,r=e.future,o=e._latestUnfiltered,i=[].concat(p(n),[o],p(r.slice(0,t))),s=r[t],l=r.slice(t+1);return(0,c.newHistory)(i,s,l)}function g(e,t){if(t<0||t>=e.past.length)return e;var n=e.past,r=e.future,o=e._latestUnfiltered,i=n.slice(0,t),s=[].concat(p(n.slice(t+1)),[o],p(r)),l=n[t];return(0,c.newHistory)(i,l,s)}function b(e,t){return t>0?y(e,t-1):t<0?g(e,e.past.length+t):e}function h(e,t){return t.indexOf(e)>-1?e:!e}},965:e=>{"use strict";function t(e,n){var r;if(Array.isArray(n))for(r=0;r<n.length;r++)t(e,n[r]);else for(r in n)e[r]=(e[r]||[]).concat(n[r])}e.exports=function(e){var n,r={};return t(r,e),(n=function(e){return function(t){return function(n){var o,i,c=r[n.type],s=t(n);if(c)for(o=0;o<c.length;o++)(i=c[o](n,e))&&e.dispatch(i);return s}}}).effects=r,n}},804:e=>{"use strict";e.exports=window.React}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{EditorLoaded:()=>qn,default:()=>Xn,initializeEditor:()=>Zn});var e={};n.r(e),n.d(e,{getCurrentPattern:()=>yt,getCurrentPatternName:()=>ft,getEditorMode:()=>ut,getEditorSettings:()=>pt,getIgnoredContent:()=>gt,getNamedPattern:()=>bt,getPatterns:()=>Ot,isEditing:()=>mt,isEditorReady:()=>dt,isInserterOpened:()=>ht,isInspecting:()=>vt});var t={};n.r(t),n.d(t,{getBlocks:()=>wt,getEditorSelectionEnd:()=>St,getEditorSelectionStart:()=>Et,hasEditorRedo:()=>_t,hasEditorUndo:()=>kt});var o={};n.r(o),n.d(o,{isFeatureActive:()=>Tt});var i={};n.r(i),n.d(i,{isOptionActive:()=>Pt});var c={};n.r(c),n.d(c,{__experimentalConvertBlockToStatic:()=>mn,__experimentalConvertBlocksToReusable:()=>On,__experimentalDeleteReusableBlock:()=>wn,__experimentalSetEditingReusableBlock:()=>En});var s={};n.r(s),n.d(s,{__experimentalIsEditingReusableBlock:()=>_n});var l=n(154),a=n.n(l),u=n(479),p=n.n(u);const d=window.wp.element,f=window.wp.editor,y=window.wp.i18n,g=window.wp.components,b=window.wp.mediaUtils,h=window.wp.blockLibrary,v=window.wp.hooks,m=window.wp.data;window.wp.formatLibrary,window.wp["components/buildStyle/style.css"],window.wp["blockEditor/buildStyle/style.css"],window.wp["blockLibrary/buildStyle/style.css"],window.wp["blockLibrary/buildStyle/editor.css"],window.wp["blockLibrary/buildStyle/theme.css"],window.wp["formatLibrary/buildStyle/style.css"];var O=n(713),w=n.n(O),E=n(38),S=n.n(E),k=n(184),_=n.n(k);const T=window.wp.compose;var P=n(575),j=n.n(P),x=n(913),B=n.n(x),C=n(205),R=n.n(C),D=n(585),I=n.n(D),M=n(754),A=n.n(M),U=n(506),N=n.n(U);const L=window.lodash;function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var o=A()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I()(this,n)}}var z=["button","submit"];function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var o=A()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I()(this,n)}}var W=(0,T.createHigherOrderComponent)((function(e){return function(t){R()(r,t);var n=F(r);function r(){var e;return j()(this,r),(e=n.apply(this,arguments)).bindNode=e.bindNode.bind(N()(e)),e.cancelBlurCheck=e.cancelBlurCheck.bind(N()(e)),e.queueBlurCheck=e.queueBlurCheck.bind(N()(e)),e.normalizeButtonFocus=e.normalizeButtonFocus.bind(N()(e)),e}return B()(r,[{key:"componentWillUnmount",value:function(){clearTimeout(this.blurCheckTimeout)}},{key:"bindNode",value:function(e){e?this.node=e:(delete this.node,this.cancelBlurCheck())}},{key:"queueBlurCheck",value:function(e){var t=this;e.persist(),this.preventBlurCheck||(this.blurCheckTimeout=setTimeout((function(){document.hasFocus()?"function"==typeof t.node.handleFocusOutside&&t.node.handleFocusOutside(e):e.preventDefault()}),0))}},{key:"cancelBlurCheck",value:function(){clearTimeout(this.blurCheckTimeout),void 0!==this.node&&"function"==typeof this.node.handleFocus&&this.node.handleFocus(event)}},{key:"normalizeButtonFocus",value:function(e){var t=e.type,n=e.target;(0,L.includes)(["mouseup","touchend"],t)?this.preventBlurCheck=!1:function(e){switch(e.nodeName){case"A":case"BUTTON":return!0;case"INPUT":return(0,L.includes)(z,e.type)}return!1}(n)&&(this.preventBlurCheck=!0)}},{key:"render",value:function(){return(0,d.createElement)("div",{onFocus:this.cancelBlurCheck,onMouseDown:this.normalizeButtonFocus,onMouseUp:this.normalizeButtonFocus,onTouchStart:this.normalizeButtonFocus,onTouchEnd:this.normalizeButtonFocus,onBlur:this.queueBlurCheck},(0,d.createElement)(e,a()({ref:this.bindNode},this.props)))}}]),r}(d.Component)}),"withFocusOutside")(function(e){R()(n,e);var t=H(n);function n(){return j()(this,n),t.apply(this,arguments)}return B()(n,[{key:"handleFocus",value:function(e){this.props.onFocus()}},{key:"handleFocusOutside",value:function(e){var t=e.relatedTarget||e.target,n=this.props.clearSelectedBlock;t&&(t.classList.contains("media-modal")||t.classList.contains("iso-editor"))||t&&null!==t.closest(".iso-editor")||(this.props.onOutside(),n())}},{key:"render",value:function(){return this.props.children}}]),n}(d.Component));const G=(0,T.compose)([(0,m.withDispatch)((function(e){return{clearSelectedBlock:e("core/block-editor").clearSelectedBlock}}))])(W),K=window.wp.blocks;function V(e){var t=e.clientId,n=void 0===t?null:t,r=e.value,o=e.selectionStart,i=e.selectionEnd,c=e.onChange,s=void 0===c?L.noop:c,l=e.onInput,a=void 0===l?L.noop:l,u=(0,m.useRegistry)(),p=u.dispatch("core/block-editor"),f=p.resetBlocks,y=p.resetSelection,g=p.replaceInnerBlocks,b=p.setHasControlledInnerBlocks,h=p.__unstableMarkNextChangeAsNotPersistent,v=u.select("core/block-editor"),O=v.getBlockName,w=v.getBlocks,E=(0,d.useRef)({incoming:null,outgoing:[]}),S=(0,d.useRef)(a),k=(0,d.useRef)(s);(0,d.useEffect)((function(){S.current=a,k.current=s}),[a,s]),(0,d.useEffect)((function(){var e,t=u.select("core/block-editor"),r=t.getSelectionStart,o=t.getSelectionEnd,i=t.isLastBlockChangePersistent,c=t.__unstableIsLastBlockChangeIgnored,s=i(),l=!1,a=u.subscribe((function(){if(null===n||null!==O(n)){var t=i(),a=w(n),u=a!==e;if(e=a,u&&(E.current.incoming||c()))return E.current.incoming=null,void(s=t);if(u||l&&!u&&t&&!s)s=t,E.current.outgoing.push(e),(s?k.current:S.current)(e,{selectionStart:r(),selectionEnd:o()});l=u}}));return function(){return a()}}),[u,n]),(0,d.useEffect)((function(){E.current.outgoing.includes(r)?(0,L.last)(E.current.outgoing)===r&&(E.current.outgoing=[]):w(n)!==r&&(E.current.outgoing=[],E.current.incoming=r,r&&(h(),n?(b(n,!0),h(),g(n,r,!1)):f(r)),o&&i&&y(o,i))}),[r,n])}const J=function(e){var t=e.children;return V(e),t},Y=window.wp.primitives;const q=(0,d.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,d.createElement)(Y.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"}));const Z=(0,d.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,d.createElement)(Y.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"}));const X=(0,d.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,d.createElement)(Y.Path,{d:"M18.3 5.6L9.9 16.9l-4.6-3.4-.9 1.2 5.8 4.3 9.3-12.6z"}));const $=(0,T.compose)([(0,m.withSelect)((function(e,t){var n=t.feature;return{isActive:e("isolated/editor").isFeatureActive(n)}})),(0,m.withDispatch)((function(e,t){return{onToggle:function(){e("isolated/editor").toggleFeature(t.feature),t.onClose()}}})),g.withSpokenMessages])((function(e){var t=e.onToggle,n=e.isActive,r=e.label,o=e.info,i=e.messageActivated,c=e.messageDeactivated,s=e.speak;return(0,d.createElement)(g.MenuItem,{icon:n&&X,isSelected:n,onClick:(0,L.flow)(t,(function(){s(n?c||(0,y.__)("Feature deactivated"):i||(0,y.__)("Feature activated"))})),role:"menuitemcheckbox",info:o},r)}));const Q=(0,T.compose)([(0,m.withSelect)((function(e,t){var n=t.option;return{isActive:e("isolated/editor").isOptionActive(n)}})),(0,m.withDispatch)((function(e,t){return{onToggle:function(){e("isolated/editor").toggleOption(t.option),t.onClose()}}})),g.withSpokenMessages])((function(e){var t=e.onToggle,n=e.isActive,r=e.label,o=e.info;return(0,d.createElement)(g.MenuItem,{icon:n&&X,isSelected:n,onClick:t,role:"menuitemcheckbox",info:o},r)}));const ee=function(e){var t=e.onClose,n=e.settings.iso.moreMenu,r=n.preview,o=n.fullscreen,i=n.topToolbar,c=(0,m.useSelect)((function(e){return{isFullscreen:e("isolated/editor").isOptionActive("fullscreenMode")}}),[]).isFullscreen;return o||r||i?(0,d.createElement)(g.MenuGroup,{label:(0,y._x)("View","noun")},i&&(0,d.createElement)(d.Fragment,null,(0,d.createElement)($,{feature:"fixedToolbar",label:(0,y.__)("Top toolbar"),info:(0,y.__)("Access all block and document tools in a single place."),messageActivated:(0,y.__)("Top toolbar activated"),messageDeactivated:(0,y.__)("Top toolbar deactivated"),onClose:t})),o&&(0,d.createElement)(Q,{option:"fullscreenMode",label:(0,y.__)("Fullscreen"),info:(0,y.__)("Show editor fullscreen."),onClose:t}),r&&!c&&(0,d.createElement)(Q,{option:"preview",label:(0,y.__)("Preview"),info:(0,y.__)("Preview the content before posting."),onClose:t})):null};const te=(0,T.compose)([(0,m.withSelect)((function(e){var t=e("isolated/editor").getEditorMode,n=e("core/editor").getEditorSettings().codeEditingEnabled;return{editorMode:t(),isCodeEditingEnabled:n}})),(0,m.withDispatch)((function(e){return{onSetMode:function(t){e("isolated/editor").setEditorMode(t)}}}))])((function(e){var t=e.onClose,n=e.editorMode,r=e.onSetMode,o=e.isCodeEditingEnabled,i=e.settings,c=function(e){r(e),t()};return o&&i.iso.moreMenu.editor?(0,d.createElement)(g.MenuGroup,{label:(0,y._x)("Editor","noun")},(0,d.createElement)(g.MenuItem,{icon:"visual"===n&&X,isSelected:"visual"===n,onClick:function(){return c("visual")},role:"menuitemcheckbox"},(0,y.__)("Visual editor")),(0,d.createElement)(g.MenuItem,{icon:"text"===n&&X,isSelected:"text"===n,onClick:function(){return c("text")},role:"menuitemcheckbox"},(0,y.__)("Code editor"))):null}));const ne=function(e){var t=e.settings.iso.linkMenu;return 0===t.length?null:(0,d.createElement)(g.MenuGroup,{label:(0,y.__)("Links")},t.map((function(e){var t=e.title,n=e.url;return(0,d.createElement)(g.MenuItem,{key:t},(0,d.createElement)(g.ExternalLink,{href:n},t))})))};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie={className:"edit-post-more-menu__content",position:"bottom left"},ce={tooltipPosition:"bottom"};const se=function(e){var t=e.settings,n=e.onClick,r=e.renderMoreMenu;return(0,d.createElement)(g.DropdownMenu,{className:"edit-post-more-menu",icon:Z,label:(0,y.__)("More tools & options"),popoverProps:ie,toggleProps:oe(oe({},ce),{},{onClick:n})},(function(e){var n=e.onClose;return(0,d.createElement)(d.Fragment,null,r&&r(t,n),(0,d.createElement)(te,{onClose:n,settings:t}),(0,d.createElement)(ee,{onClose:n,settings:t}),(0,d.createElement)(ne,{settings:t}))}))},le=window.wp.blockEditor;const ae=(0,d.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,d.createElement)(Y.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"})),ue=window.wp.keycodes;const pe=(0,d.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,d.createElement)(Y.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"}));const de=(0,d.forwardRef)((function(e,t){var n=(0,m.useSelect)((function(e){return e("core/editor").hasEditorRedo()}),[]),r=(0,m.useDispatch)("core/editor").redo;return(0,d.createElement)(g.Button,a()({},e,{ref:t,icon:pe,label:(0,y.__)("Redo"),shortcut:ue.displayShortcut.primaryShift("z"),"aria-disabled":!n,onClick:n?r:void 0,className:"editor-history__redo"}))}));const fe=(0,d.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,d.createElement)(Y.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"}));const ye=(0,d.forwardRef)((function(e,t){var n=(0,m.useSelect)((function(e){return e("isolated/editor").hasEditorUndo()}),[]),r=(0,m.useDispatch)("isolated/editor").undo;return(0,d.createElement)(g.Button,a()({},e,{ref:t,icon:fe,label:(0,y.__)("Undo"),shortcut:ue.displayShortcut.primary("z"),"aria-disabled":!n,onClick:n?r:void 0,className:"editor-history__undo"}))}));const ge=function(e){var t=(0,d.useRef)(),n=(0,m.useDispatch)("isolated/editor").setIsInserterOpened,r=(0,T.useViewportMatch)("medium","<"),o=(0,m.useSelect)((function(e){var t=e("core/block-editor"),n=t.hasInserterItems,r=t.getBlockRootClientId,o=t.getBlockSelectionEnd;return{hasFixedToolbar:e("isolated/editor").isFeatureActive("fixedToolbar"),isInserterEnabled:"visual"===e("isolated/editor").getEditorMode()&&e("core/editor").getEditorSettings().richEditingEnabled&&n(r(o())),isTextModeEnabled:"text"===e("isolated/editor").getEditorMode(),previewDeviceType:"Desktop",isInserterOpened:e("isolated/editor").isInserterOpened()}}),[]),i=o.hasFixedToolbar,c=o.isInserterEnabled,s=o.isTextModeEnabled,l=o.previewDeviceType,a=o.isInserterOpened,u=(0,T.useViewportMatch)("medium"),p=e.settings.iso.toolbar,b=p.inserter,h=p.toc,v=p.navigation,O=p.undo,w=!u||"Desktop"!==l||i,E=w?(0,y.__)("Document and block tools"):(0,y.__)("Document tools");return(0,d.createElement)(le.NavigableToolbar,{className:"edit-post-header-toolbar","aria-label":E},(b||O||v||h)&&(0,d.createElement)("div",{className:"edit-post-header-toolbar__left"},b&&(0,d.createElement)(g.ToolbarItem,{ref:t,as:g.Button,className:"edit-post-header-toolbar__inserter-toggle",isPrimary:!0,isPressed:a,onMouseDown:function(e){e.preventDefault()},onClick:function(){a?t.current.focus():n(!0)},disabled:!c,icon:ae,label:(0,y._x)("Add block","Generic label for block inserter button")}),a&&(0,d.createElement)(g.Popover,{position:"bottom right",onClose:function(){return n(!1)},anchorRef:t.current},(0,d.createElement)(le.__experimentalLibrary,{showMostUsedBlocks:!1,showInserterHelpPanel:!0,onSelect:function(){r&&n(!1)}})),O&&(0,d.createElement)(g.ToolbarItem,{as:ye}),O&&(0,d.createElement)(g.ToolbarItem,{as:de}),v&&(0,d.createElement)(g.ToolbarItem,{as:le.BlockNavigationDropdown,isDisabled:s}),h&&(0,d.createElement)(g.ToolbarItem,{as:f.TableOfContents,hasOutlineItemsDisabled:s})),w&&!s&&(0,d.createElement)("div",{className:"edit-post-header-toolbar__block-toolbar"},(0,d.createElement)(le.BlockToolbar,{hideDragHandle:!0})))};const be=function(){return(0,d.createElement)(g.Popover,{position:"bottom",className:"iso-inspector"},(0,d.createElement)(le.BlockInspector,null))};const he=function(e){var t=e.settings,n=e.editorMode,r=e.renderMoreMenu,o=t.iso.toolbar.inspector,i=t.iso.moreMenu,c=(0,m.useDispatch)("isolated/editor").setInspecting,s=(0,m.useSelect)((function(e){return{isInspecting:e("isolated/editor").isInspecting(),isBlockSelected:!!e("core/block-editor").getBlockSelectionStart()}}),[]),l=s.isInspecting,a=s.isBlockSelected;return(0,d.useEffect)((function(){l&&!a&&c(!1)}),[a]),(0,d.createElement)("div",{className:"edit-post-editor-regions__header",role:"region",tabIndex:-1},(0,d.createElement)("div",{className:"edit-post-header"},(0,d.createElement)("div",{className:"edit-post-header__toolbar"},(0,d.createElement)(ge,{settings:t})),(0,d.createElement)("div",{className:"edit-post-header__settings"},o&&(0,d.createElement)(g.Button,{icon:q,label:(0,y.__)("Settings"),onClick:function(){return c(!l)},isPressed:l,"aria-expanded":l,shortcut:"x",disabled:"text"===n}),l&&(0,d.createElement)(be,null),i&&(0,d.createElement)(se,{settings:t,onClick:function(){return c(!1)},renderMoreMenu:r}))))};window.wp.reusableBlocks;n(804);const ve=function(){var e=(0,d.useRef)();return(0,le.__unstableUseScrollMultiSelectionIntoView)(e),(0,le.__unstableUseBlockSelectionClearer)(e),(0,le.__unstableUseTypewriter)(e),(0,le.__unstableUseClipboardHandler)(e),(0,le.__unstableUseTypingObserver)(e),(0,d.createElement)("div",{className:"edit-post-visual-editor"},(0,d.createElement)(g.Popover.Slot,{name:"block-toolbar"}),(0,d.createElement)("div",{className:"editor-styles-wrapper",ref:e},(0,d.createElement)(le.WritingFlow,null,(0,d.createElement)(le.BlockList,null))))};var me=n(64),Oe=n.n(me),we=n(42);function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var o=A()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I()(this,n)}}var Se=function(e){R()(n,e);var t=Ee(n);function n(){var e;return j()(this,n),(e=t.apply(this,arguments)).edit=e.edit.bind(N()(e)),e.stopEditing=e.stopEditing.bind(N()(e)),e.state={},e}return B()(n,[{key:"edit",value:function(e){var t=e.target.value;this.props.onChange(t),this.setState({value:t,isDirty:!0})}},{key:"stopEditing",value:function(){this.state.isDirty&&(this.props.onPersist(this.state.value),this.setState({isDirty:!1}))}},{key:"render",value:function(){var e=this.state.value,t=this.props.instanceId;return(0,d.createElement)(d.Fragment,null,(0,d.createElement)("label",{htmlFor:"post-content-".concat(t),className:"screen-reader-text"},(0,y.__)("Type text or HTML")),(0,d.createElement)(we.Z,{autoComplete:"off",dir:"auto",value:e,onChange:this.edit,onBlur:this.stopEditing,className:"editor-post-text-editor",id:"post-content-".concat(t),placeholder:(0,y.__)("Start writing with text or HTML")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.isDirty?null:{value:e.value,isDirty:!1}}}]),n}(d.Component);const ke=(0,T.compose)([(0,m.withSelect)((function(e){var t=e("isolated/editor").getBlocks;return{value:(0,K.serialize)(t())}})),(0,m.withDispatch)((function(e){var t=e("isolated/editor").updateBlocksWithoutUndo;return{onChange:function(e){var n=(0,K.parse)(e);t(n)},onPersist:function(e){var n=(0,K.parse)(e);t(n)}}})),T.withInstanceId])(Se);const _e=function(e){return Oe()(e),(0,d.createElement)("div",{className:"edit-post-text-editor"},(0,d.createElement)("div",{className:"edit-post-text-editor__body"},(0,d.createElement)(ke,null)))};const Te=(0,T.compose)([(0,m.withSelect)((function(e){var t=e("core/block-editor"),n=t.getBlockRootClientId,r=t.getBlocksByClientId,o=t.canInsertBlockType,i=t.getSelectedBlockClientIds,c=e("core/blocks").getGroupingBlockName,s=i(),l=c(),a=o(l,s&&s.length>0?n(s[0]):void 0),u=r(s),p=1===u.length&&u[0]&&u[0].name===l;return{clientIds:s,isGroupable:a&&u.length&&!p,isUngroupable:p&&!!u[0].innerBlocks.length,blocksSelection:u,groupingBlockName:l}})),(0,m.withDispatch)((function(e,t){var n=t.clientIds,r=t.blocksSelection,o=void 0===r?[]:r,i=t.groupingBlockName,c=e("core/block-editor").replaceBlocks;return{onConvertToGroup:function(){var e=(0,K.switchToBlockType)(o,i);e&&c(n,e)},onConvertFromGroup:function(){var e=o[0].innerBlocks;e.length&&c(n,e)}}}))])((function(e){var t=e.onConvertToGroup,n=e.onConvertFromGroup,r=e.isGroupable,o=void 0!==r&&r,i=e.isUngroupable,c=void 0!==i&&i;return o||c?(0,d.createElement)(le.BlockSettingsMenuControls,null,(function(e){var r=e.onClose;return(0,d.createElement)(d.Fragment,null,o&&(0,d.createElement)(g.MenuItem,{onClick:function(){t(),r()}},(0,y._x)("Group","verb")),c&&(0,d.createElement)(g.MenuItem,{onClick:function(){n(),r()}},(0,y._x)("Ungroup","Ungrouping blocks from within a Group block back into individual blocks within the Editor ")))})):null}));var Pe="is-fullscreen-mode";function je(){document.body.classList.remove(Pe),document.querySelector("html").classList.remove(Pe)}function xe(){var e=(0,m.useSelect)((function(e){return{fullscreenMode:e("isolated/editor").isOptionActive("fullscreenMode")}}),[]).fullscreenMode;return(0,d.useEffect)((function(){return e?(document.body.classList.add(Pe),document.querySelector("html").classList.add(Pe)):je(),function(){je()}}),[e]),null}const Be=(0,m.withDispatch)((function(e){var t=e("isolated/editor");return{redo:t.redo,undo:t.undo}}))((function(e){var t,n=e.isEditing,r=e.editorMode,o=e.children,i=e.undo,c=e.redo;return(0,d.createElement)(d.Fragment,null,(0,d.createElement)(xe,null),(0,d.createElement)(Te,null),(0,d.createElement)(f.EditorNotices,null),n&&(0,d.createElement)(d.Fragment,null,(0,d.createElement)(le.BlockEditorKeyboardShortcuts,null),(0,d.createElement)(le.BlockEditorKeyboardShortcuts.Register,null)),(0,d.createElement)(g.KeyboardShortcuts,{bindGlobal:!1,shortcuts:(t={},w()(t,ue.rawShortcut.primary("z"),i),w()(t,ue.rawShortcut.primaryShift("z"),c),t)},"visual"===r&&(0,d.createElement)(ve,null),"text"===r&&(0,d.createElement)(_e,null)),o)}));const Ce=function(e,t,n,r){if(void 0===e)return r;if(r&&r.length>0)return r;if(t){var o=function(e,t){return e&&e.find((function(e){return e.name===t}))}(e,t);if(o)return(0,K.parse)(o.content)}return n?(0,K.synchronizeBlocksWithTemplate)(r,n):[]};const Re=(0,T.compose)([(0,m.withSelect)((function(e){var t=e("isolated/editor"),n=t.getBlocks,r=t.getEditorSelectionStart,o=t.getEditorSelectionEnd,i=t.getEditorMode,c=t.isEditing;return{blocks:n(),getEditorSelectionEnd:o,getEditorSelectionStart:r,isEditing:c(),editorMode:i()}})),(0,m.withDispatch)((function(e){var t=e("isolated/editor");return{updateBlocksWithUndo:t.updateBlocksWithUndo,updateBlocksWithoutUndo:t.updateBlocksWithoutUndo}}))])((function(e){var t=e.blocks,n=e.updateBlocksWithoutUndo,r=e.updateBlocksWithUndo,o=e.getEditorSelectionStart,i=e.getEditorSelectionEnd,c=e.isEditing,s=e.editorMode,l=e.children,a=e.settings,u=e.renderMoreMenu,p=e.onLoad;return(0,d.useEffect)((function(){var e=function(e,t){return Ce(e.iso.patterns,e.iso.currentPattern,e.editor.template,t)}(a,p?p(K.parse,K.rawHandler):[]);e.length>0&&(!t||0===t.length)&&n(e)}),[]),(0,d.createElement)(J,{value:t||[],onInput:n,onChange:r,selectionStart:o(),selectionEnd:i(),useSubRegistry:!0,settings:a.editor},(0,d.createElement)(he,{editorMode:s,settings:a,renderMoreMenu:u}),(0,d.createElement)(Be,{isEditing:c,editorMode:s},l),(0,d.createElement)(g.Popover.Slot,null))}));function De(e,t){return{dispatch:function(t){return null===De.targetDispatch||"core/block-editor"!==t?e.dispatch(t):De.targetDispatch(t)},select:function(t){return null===De.targetSelect||"core/block-editor"!==t?e.select(t):De.targetSelect(t)}}}De.targetSelect=null,De.targetDispatch=null,De.setEditor=function(e,t){this.targetSelect=e,this.targetDispatch=t},De.resetEditor=function(){this.targetSelect=null,this.targetDispatch=null};const Ie=De;const Me=(0,T.compose)([(0,m.withSelect)((function(e){return{isEditing:(0,e("isolated/editor").isEditing)()}})),(0,m.withDispatch)((function(e,t,n){var r=n.select;return{hotSwap:function(t){Ie.resetEditor(),t&&Ie.setEditor(r,e)}}}))])((function(e){var t=e.isEditing,n=e.hotSwap;return(0,d.useEffect)((function(){n(t)}),[t]),null}));const Ae=(0,T.compose)([(0,m.withSelect)((function(e){var t=e("isolated/editor"),n=t.isEditorReady,r=t.getEditorMode,o=t.isEditing,i=t.isFeatureActive;return{isEditorReady:n(),editorMode:r(),isEditing:o(),hasFixedToolbar:i("fixedToolbar")}})),(0,m.withDispatch)((function(e){return{setEditing:e("isolated/editor").setEditing}}))])((function(e){var t=e.children,n=e.settings,r=e.onSave,o=e.className,i=e.onError,c=e.renderMoreMenu,s=e.onLoad,l=e.isEditorReady,a=e.editorMode,u=e.isEditing,p=e.setEditing,y=e.hasFixedToolbar,g=(0,T.useResizeObserver)(),b=S()(g,2),h=b[0],v=b[1].width,m=_()(o,w()({"iso-editor":!0,"is-large":v>=720,"is-medium":v>=480&&v<720,"is-small":v<480,"iso-editor__loading":!l,"iso-editor__selected":u,"block-editor":!0,"edit-post-layout":!0,"has-fixed-toolbar":y},"is-mode-"+a,!0));return(0,d.createElement)("div",{className:m},(0,d.createElement)(f.ErrorBoundary,{onError:i},(0,d.createElement)(Me,null),h,(0,d.createElement)(G,{onOutside:function(){return p(!1)},onFocus:function(){return!u&&p(!0)}},(0,d.createElement)(Re,{onSave:r,settings:n,renderMoreMenu:c,onLoad:s},t))))}));var Ue=n(90);const Ne=window.wp.isShallowEqual;var Le=n.n(Ne);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He={editCount:0,selectionStart:null,selectionEnd:null,blocks:null};function We(e,t){return e.find((function(e){return e.clientId===t.clientId}))}function Ge(e,t){var n=e.type,r=e.selectionStart,o=e.selectionEnd;if("UPDATE_BLOCKS_WITHOUT_UNDO"===n)return!1;if(Le()(r,t.selectionStart)&&Le()(o,t.selectionEnd)){var i=We(t.blocks,r),c=We(e.blocks,r);if(i&&c&&Le()(i.attributes,c.attributes))return!1}return!0}const Ke=(0,Ue.ZP)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_BLOCKS_WITHOUT_UNDO":case"UPDATE_BLOCKS_WITH_UNDO":return ze(ze({},e),{},{editCount:Ge(t,e)?e.editCount+1:e.editCount,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd,blocks:t.blocks})}return e}),{groupBy:function(e,t,n){return t.editCount}});function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ye={undo:function(){return Ue.zF.undo()},redo:function(){return Ue.zF.redo()},updateBlocksWithUndo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Je({type:"UPDATE_BLOCKS_WITH_UNDO",blocks:e},t)},updateBlocksWithoutUndo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Je({type:"UPDATE_BLOCKS_WITHOUT_UNDO",blocks:e},t)}};function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe={editorMode:"visual",isInserterOpened:!1,isEditing:!1,isInspecting:!1,isReady:!1,patterns:[],currentPattern:null,gutenbergTemplate:null,ignoredContent:[],settings:{preferencesKey:null,persistenceKey:null,blocks:{allowBlocks:[],disallowBlocks:[]},disallowEmbed:[],toolbar:{inserter:!0,toc:!1,undo:!0,inspector:!0,navigation:!1},moreMenu:{editor:!1,fullscreen:!1,preview:!1,topToolbar:!1},linkMenu:[],currentPattern:null,defaultPreferences:{},allowApi:!1}};function $e(e,t,n){var r=[(0,K.serialize)((0,K.createBlock)("core/paragraph")),(0,K.serialize)((0,K.createBlock)("core/paragraph",{className:""}))],o=function(e,t){return e&&e.find((function(e){return e.name===t}))}(e,t);return o&&r.push((0,K.serialize)((0,K.parse)(o.content))),n&&r.push((0,K.serialize)((0,K.synchronizeBlocksWithTemplate)([],n))),r}const Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETUP_EDITOR":var n=t.settings.iso,r=n.currentPattern,o=n.patterns;return Ze(Ze({},e),{},{patterns:o,currentPattern:r,ignoredContent:$e(o,r,t.settings.editor.template),gutenbergTemplate:t.settings.editor.template,settings:Ze(Ze({},e.settings),t.settings.iso)});case"SET_CURRENT_PATTERN":return Ze(Ze({},e),{},{currentPattern:t.pattern,ignoredContent:$e(e.patterns,t.pattern,e.gutenbergTemplate),isInspecting:!1});case"SET_EDITOR_MODE":return Ze(Ze({},e),{},{editorMode:t.editorMode,isInspecting:!1});case"SET_INSERTER_OPEN":return Ze(Ze({},e),{},{isInserterOpened:t.isOpen,isInspecting:!1});case"SET_INSPECTOR_OPEN":return Ze(Ze({},e),{},{isInspecting:t.isOpen,isInserterOpened:!1});case"SET_EDITING":return Ze(Ze({},e),{},{isEditing:t.isEditing,isInspecting:!1});case"SET_EDITOR_READY":return Ze(Ze({},e),{},{isReady:t.isReady})}return e};const et={setReady:function(e){return{type:"SET_EDITOR_READY",isReady:e}},setEditorMode:function(e){return{type:"SET_EDITOR_MODE",editorMode:e}},setupEditor:function(e){return{type:"SETUP_EDITOR",settings:e}},setCurrentPattern:function(e){return{type:"SET_CURRENT_PATTERN",pattern:e}},setIsInserterOpened:function(e){return{type:"SET_INSERTER_OPEN",isOpen:e}},setEditing:function(e){return{type:"SET_EDITING",isEditing:e}},setInspecting:function(e){return{type:"SET_INSPECTOR_OPEN",isOpen:e}}};function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const rt=function(e,t){switch(t.type){case"TOGGLE_FEATURE":return nt(nt({},e),{},w()({},t.feature,!e[t.feature]||!e[t.feature]))}return e};const ot={toggleFeature:function(e){return{type:"TOGGLE_FEATURE",feature:e}}};function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var st={};const lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_OPTION":return ct(ct({},e),{},w()({},t.option,!e[t.option]||!e[t.option]))}return e};const at={toggleOption:function(e){return{type:"TOGGLE_OPTION",option:e}}};function ut(e){return e.editor.editorMode}function pt(e){return e.editor.settings}function dt(e){return e.editor.isReady}function ft(e){return e.editor.currentPattern}function yt(e){var t=e.editor,n=t.currentPattern,r=t.patterns;if(n&&r)for(var o=0;o<r.length;o++)if(r[o].name===n)return r[o];return null}function gt(e){return e.editor.ignoredContent}function bt(e,t){var n=e.editor.patterns,r=void 0===n?[]:n,o=r.find((function(e){return e.name===t}));return o||((o=r.find((function(e){return e.name.replace("p2/","")===t})))||null)}function ht(e){return e.editor.isInserterOpened}function vt(e){return e.editor.isInspecting}function mt(e){return e.editor.isEditing}function Ot(e){return e.editor.patterns}function wt(e){return e.blocks.present.blocks}function Et(e){return e.blocks.present.selectionStart}function St(e){return e.blocks.present.selectionEnd}function kt(e){return e.blocks.past.length>0&&"visual"===ut(e)}function _t(e){return e.blocks.future.length>0&&"visual"===ut(e)}function Tt(e,t){return!!e.preferences[t]&&e.preferences[t]}function Pt(e,t){return!!e.options[t]&&e.options[t]}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Bt=function(n,r){return{reducer:(0,m.combineReducers)({blocks:Ke,editor:Qe,preferences:rt,options:lt}),actions:xt(xt(xt(xt({},Ye),et),at),ot),selectors:xt(xt(xt(xt({},t),e),o),i),persist:["preferences"],initialState:{preferences:n&&localStorage.getItem(n)?JSON.parse(localStorage.getItem(n)):r}}};var Ct=n(965),Rt=n.n(Ct);const Dt={TOGGLE_FEATURE:function(e,t){var n=(0,t.getState)(),r=n.preferences,o=n.editor;o.settings.preferencesKey&&localStorage.setItem(o.settings.preferencesKey,JSON.stringify(r))}};function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Mt=function(e){var t=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},n={getState:e.getState,dispatch:function(){return t.apply(void 0,arguments)}};return t=Rt()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Dt))(n)(e.dispatch),e.dispatch=t,e};var At=n(319),Ut=n.n(At),Nt=n(950),Lt=n(8),Ft=n.n(Lt);const zt=window.wp.a11y,Ht=window.wp.richText;function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt=le.storeConfig.actions,Vt=Kt.replaceBlocks,Jt=Kt.selectBlock,Yt=Kt.setTemplateValidity,qt=Kt.resetBlocks,Zt=Kt.selectionChange,Xt=le.storeConfig.selectors,$t=Xt.getBlock,Qt=Xt.getBlocks,en=Xt.getSelectedBlockCount,tn=Xt.getTemplateLock,nn=Xt.getTemplate,rn=Xt.isValidTemplate,on=Xt.getSelectionStart;const cn={MERGE_BLOCKS:function(e,t){var n=t.dispatch,r=t.getState(),o=S()(e.blocks,2),i=o[0],c=o[1],s=$t(r,i),l=(0,K.getBlockType)(s.name);if(l.merge){var a=$t(r,c),u=(0,K.getBlockType)(a.name),p=on(r),d=p.clientId,f=p.attributeKey,y=p.offset,g=(d===i?l:u).attributes[f],b=(d===i||d===c)&&void 0!==f&&void 0!==y&&!!g;g||("number"==typeof f?window.console.error("RichText needs an identifier prop that is the block attribute key of the attribute it controls. Its type is expected to be a string, but was ".concat(Ft()(f))):window.console.error("The RichText identifier prop does not match any attributes defined by the block."));var h=(0,K.cloneBlock)(s),v=(0,K.cloneBlock)(a);if(b){var m=d===i?h:v,O=m.attributes[f],w=g.multiline,E=g.__unstableMultilineWrapperTags,k=g.__unstablePreserveWhiteSpace,_=(0,Ht.insert)((0,Ht.create)({html:O,multilineTag:w,multilineWrapperTags:E,preserveWhiteSpace:k}),"",y,y);m.attributes[f]=(0,Ht.toHTMLString)({value:_,multilineTag:w,preserveWhiteSpace:k})}var T=s.name===a.name?[v]:(0,K.switchToBlockType)(v,s.name);if(T&&T.length){var P=l.merge(h.attributes,T[0].attributes);if(b){var j=(0,L.findKey)(P,(function(e){return"string"==typeof e&&-1!==e.indexOf("")})),x=P[j],B=l.attributes[j],C=B.multiline,R=B.__unstableMultilineWrapperTags,D=B.__unstablePreserveWhiteSpace,I=(0,Ht.create)({html:x,multilineTag:C,multilineWrapperTags:R,preserveWhiteSpace:D}),M=I.text.indexOf(""),A=(0,Ht.remove)(I,M,M+1),U=(0,Ht.toHTMLString)({value:A,multilineTag:C,preserveWhiteSpace:D});P[j]=U,n(Zt(s.clientId,j,M,M))}n(Vt([s.clientId,a.clientId],[Gt(Gt({},s),{},{attributes:Gt(Gt({},s.attributes),P)})].concat(Ut()(T.slice(1)))))}}else n(Jt(s.clientId))},RESET_BLOCKS:[function(e,t){var n=t.getState(),r=nn(n),o=tn(n),i=!r||"all"!==o||(0,K.doBlocksMatchTemplate)(e.blocks,r);if(i!==rn(n))return Yt(i)}],MULTI_SELECT:function(e,t){var n=t.getState,r=en(n());(0,zt.speak)((0,y.sprintf)((0,y._n)("%s block selected.","%s blocks selected.",r),r),"assertive")},SYNCHRONIZE_TEMPLATE:function(e,t){var n=(0,t.getState)(),r=Qt(n),o=nn(n),i=(0,K.synchronizeBlocksWithTemplate)(r,o);return qt(i)},MARK_AUTOMATIC_CHANGE:function(e,t){var n=window,r=n.setTimeout,o=n.requestIdleCallback;(void 0===o?function(e){return r(e,100)}:o)((function(){t.dispatch({type:"MARK_AUTOMATIC_CHANGE_FINAL"})}))}};const sn=function(e){var t,n=[Rt()(cn),Nt.Z],r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:e.getState,dispatch:function(){return r.apply(void 0,arguments)}};return t=n.map((function(e){return e(o)})),r=L.flowRight.apply(void 0,Ut()(t))(e.dispatch),e.dispatch=r,e},ln=window.regeneratorRuntime;var an=n.n(ln),un=n(926),pn=n.n(un);function dn(e){return{type:"CONVERT_BLOCK_TO_STATIC",clientId:e}}function fn(e){return{type:"CONVERT_BLOCKS_TO_REUSABLE",clientIds:e}}function yn(e){return{type:"DELETE_REUSABLE_BLOCK",id:e}}const gn={CONVERT_BLOCK_TO_STATIC:(0,m.createRegistryControl)((function(e){return function(t){var n=t.clientId,r=e.select("core/block-editor").getBlock(n),o=e.select("core").getEditedEntityRecord("postType","wp_block",r.attributes.ref),i=(0,K.parse)(o.content);e.dispatch("core/block-editor").replaceBlocks(r.clientId,i)}})),CONVERT_BLOCKS_TO_REUSABLE:(0,m.createRegistryControl)((function(e){return function(){var t=pn()(an().mark((function t(n){var r,o,i,c;return an().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.clientIds,o={title:(0,y.__)("Untitled Reusable Block"),content:(0,K.serialize)(e.select("core/block-editor").getBlocksByClientId(r)),status:"publish"},t.next=4,e.dispatch("core").saveEntityRecord("postType","wp_block",o);case 4:i=t.sent,c=(0,K.createBlock)("core/block",{ref:i.id}),e.dispatch("core/block-editor").replaceBlocks(r,c),e.dispatch(reusableBlocksStore).__experimentalSetEditingReusableBlock(c.clientId,!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),DELETE_REUSABLE_BLOCK:(0,m.createRegistryControl)((function(e){return function(){var t=pn()(an().mark((function t(n){var r,o,i,c;return an().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.id,e.select("core").getEditedEntityRecord("postType","wp_block",r)){t.next=4;break}return t.abrupt("return");case 4:return o=e.select("core/block-editor").getBlocks(),i=o.filter((function(e){return(0,K.isReusableBlock)(e)&&e.attributes.ref===r})),(c=i.map((function(e){return e.clientId}))).length&&e.dispatch("core/block-editor").removeBlocks(c),t.next=10,e.dispatch("core").deleteEntityRecord("postType","wp_block",r);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}))};var bn=an().mark(mn),hn=an().mark(On),vn=an().mark(wn);function mn(e){return an().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dn(e);case 2:case"end":return t.stop()}}),bn)}function On(e){return an().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fn(e);case 2:case"end":return t.stop()}}),hn)}function wn(e){return an().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yn(e);case 2:case"end":return t.stop()}}),vn)}function En(e,t){return{type:"SET_EDITING_REUSABLE_BLOCK",clientId:e,isEditing:t}}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _n(e,t){return e.isEditingReusableBlock[t]}const Tn={actions:c,controls:gn,reducer:(0,m.combineReducers)({isEditingReusableBlock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SET_EDITING_REUSABLE_BLOCK"===(null==t?void 0:t.type)?kn(kn({},e),{},w()({},t.clientId,t.isEditing)):e}}),selectors:s};function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cn=[];const Rn=(0,T.createHigherOrderComponent)((function(e){return(0,m.withRegistry)((function(t){var n=t.registry,r=t.settings,o=p()(t,["registry","settings"]),i=function(e){var t,n,r,o,i,c,s,l,a,u,p,d,f,g,b,h,v=e.iso,m=e.editor;return{iso:{preferencesKey:null!==(t=null==v?void 0:v.preferencesKey)&&void 0!==t?t:null,persistenceKey:null!==(n=null==v?void 0:v.persistenceKey)&&void 0!==n?n:null,disallowEmbed:null!==(r=null==v?void 0:v.disallowEmbed)&&void 0!==r?r:[],blocks:{allowBlocks:null!==(o=null==v||null===(i=v.blocks)||void 0===i?void 0:i.allowBlocks)&&void 0!==o?o:[],disallowBlocks:null!==(c=null==v||null===(s=v.blocks)||void 0===s?void 0:s.disallowBlocks)&&void 0!==c?c:[]},toolbar:jn({inserter:!0,inspector:!1,navigation:!1,toc:!1,undo:!0},null!==(l=null==v?void 0:v.toolbar)&&void 0!==l?l:{}),moreMenu:(b=null==v?void 0:v.moreMenu,h=jn({editor:!1,fullscreen:!1,preview:!1,topToolbar:!1},null!==(a=null==v?void 0:v.moreMenu)&&void 0!==a?a:{}),!1!==b&&h),linkMenu:null!==(u=null==v?void 0:v.linkMenu)&&void 0!==u?u:[],defaultPreferences:jn({fixedToolbar:!0},null!==(p=null==v?void 0:v.defaultPreferences)&&void 0!==p?p:{}),allowApi:null!==(d=null==v?void 0:v.allowApi)&&void 0!==d&&d,currentPattern:null!==(f=null==v?void 0:v.currentPattern)&&void 0!==f?f:null,patterns:null!==(g=null==v?void 0:v.patterns)&&void 0!==g?g:[]},editor:jn(jn({alignWide:!0,disableCustomColors:!1,disableCustomFontSizes:!1,disablePostFormats:!0,titlePlaceholder:(0,y.__)("Add title"),bodyPlaceholder:(0,y.__)("Start writing or type / to choose a block"),isRTL:!1,autosaveInterval:60,maxUploadFileSize:0,allowedMimeTypes:[],styles:{css:"body { font-family: 'Noto Serif' }"},imageSizes:[],richEditingEnabled:!0,codeEditingEnabled:!1,allowedBlockTypes:!0,__experimentalCanUserUseUnfilteredHTML:!1,__experimentalBlockPatterns:!1,reusableBlocks:!1,fixedToolbar:!0},m),{},{availableLegacyWidgets:{},hasPermissionsToManageWidgets:!1,__experimentalFetchLinkSuggestions:null!=m&&m.__experimentalFetchLinkSuggestions?null==m?void 0:m.__experimentalFetchLinkSuggestions:function(){return[]}})}}(r),c=i.iso,s=c.persistenceKey,l=c.preferencesKey,u=c.defaultPreferences,f=(0,d.useState)(null),g=S()(f,2),b=g[0],h=g[1];return(0,d.useEffect)((function(){var e=(0,m.createRegistry)({"core/reusable-blocks":Tn},n);s&&e.use(m.plugins.persistence,{persistenceKey:s});var t=e.registerStore("isolated/editor",Bt(l,u)),r=e.registerStore("core/block-editor",Bn(Bn({},le.storeConfig),{},{persist:["preferences"]}));return Cn.push(t),Cn.push(r),Mt(t),h(e),sn(r),function(){Cn=Cn.filter((function(e){return e!==t&&e!==r}))}}),[n]),b?(0,d.createElement)(m.RegistryProvider,{value:b},(0,d.createElement)(e,a()({},o,{settings:i}))):null}))}),"withRegistryProvider");function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mn(e,t){return e&&e.allowBlocks&&e.allowBlocks.length>0?e.allowBlocks:t.map((function(e){return e.name}))}function An(e,t,n,r){var o,i=(o=t.blocks)&&o.disallowBlocks?o.disallowBlocks:[];return In(In({},e),{},{hasFixedToolbar:r,allowedBlockTypes:Mn(t.blocks,n).filter((function(e){return-1===i.indexOf(e)})),mediaUpload:0===e.allowedMimeTypes.length?null:e.mediaUpload})}function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ln=(0,T.compose)([(0,m.withSelect)((function(e,t,n){var r=t.settings,o=e("isolated/editor"),i=o.isEditing,c=o.isFeatureActive,s=(0,e("core/blocks").getBlockTypes)(),l=c("fixedToolbar"),a=e("core").getEntityRecords("postType","wp_block");return{isEditing:i(),topToolbar:l,currentSettings:(0,d.useMemo)((function(){var e;return Nn(Nn({},r),{},{editor:Nn(Nn({},An(r.editor,r.iso,s,l||(null===(e=r.editor)||void 0===e?void 0:e.hasFixedToolbar)||!1)),{},{__experimentalReusableBlocks:[],__experimentalFetchReusableBlocks:!1})})}),[r,s,l,a])}})),(0,m.withDispatch)((function(e){var t=e("core/editor").updateEditorSettings,n=e("core/block-editor").updateSettings;return{setupEditor:e("isolated/editor").setupEditor,updateSettings:function(e){var r=e.editor;n(r),t(r)}}}))])((function(e){var t=e.currentSettings,n=e.updateSettings,r=e.setupEditor,o=e.isEditing,i=e.topToolbar;return(0,d.useEffect)((function(){r(t),n(t)}),[]),(0,d.useEffect)((function(){o&&n(t)}),[o,i,t.editor.reusableBlocks]),null}));const Fn=(0,T.compose)([(0,m.withSelect)((function(e){return{currentPattern:(0,e("isolated/editor").getCurrentPattern)()}})),(0,m.withDispatch)((function(e){return{updateBlocksWithoutUndo:e("isolated/editor").updateBlocksWithoutUndo}}))])((function(e){var t=e.currentPattern,n=e.updateBlocksWithoutUndo;return(0,d.useEffect)((function(){null!==t&&n((0,K.parse)(t.content))}),[t]),null}));const zn=function(e){var t=e.onSaveBlocks,n=e.onSaveContent,r=(0,d.useRef)(!0),o=(0,m.useDispatch)("isolated/editor").setReady,i=(0,m.useSelect)((function(e){return{blocks:e("isolated/editor").getBlocks(),ignoredContent:e("isolated/editor").getIgnoredContent()}}),[]),c=i.blocks,s=i.ignoredContent;return(0,d.useEffect)((function(){c?r.current?(r.current=!1,o(!0)):(t&&t(c,s),n&&n((0,K.serialize)(c))):o(!0)}),[c]),null},Hn=window.wp.apiFetch;var Wn=n.n(Hn);const Gn=function(e){Wn().use(Wn().createPreloadingMiddleware({OPTIONS:{"/wp/v2/blocks":{body:[]}},"/wp/v2/types?context=edit":{body:{post:{capabilities:{edit_post:"edit_post"},description:"",hierarchical:!1,viewable:!0,name:"Posts",slug:"post",labels:{name:"Posts",singular_name:"Post"},supports:{title:!1,editor:!0,author:!1,thumbnail:!1,excerpt:!1,trackbacks:!1,"custom-fields":!1,comments:!1,revisions:!1,"post-formats":!1,"geo-location":!1},taxonomies:[],rest_base:"posts"}}}}))};function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Jn=function(e,t){return{select:function(n){if(t&&t[n]){var r=e.select(n);return Vn(Vn({},r),t[n](r,e))}return e.select(n)}}},Yn={"core/editor":function(e,t){return{getEditedPostAttribute:function(t){return"content"===t?(0,K.serialize)((0,m.useSelect)((function(e){return e("core/block-editor").getBlocks()}))):"title"===t?"":"type"===t?"post":e.getEditedPostAttribute(t)},getEditedPostContent:function(){return(0,K.serialize)(t.select("core/block-editor").getBlocks())}}}};const qn=function(e){var t=e.onLoaded,n=e.onLoading,r=(0,m.useSelect)((function(e){return{isEditorReady:e("isolated/editor").isEditorReady()}}),[]).isEditorReady;return(0,d.useEffect)((function(){r?t&&t():n&&n()}),[r]),null};function Zn(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window.isoInitialised||((0,m.use)(Ie,{}),(0,m.use)(Jn,Yn),(0,v.addFilter)("editor.MediaUpload","isolated-block-editor/media-upload",(function(){return b.MediaUpload})),(0,h.registerCoreBlocks)(),e||Gn(),window.isoInitialised=!0)}const Xn=Rn((function(e){var t,n=e.children,r=e.onSaveContent,o=e.onSaveBlocks,i=e.settings,c=p()(e,["children","onSaveContent","onSaveBlocks","settings"]);return Zn(null==i||null===(t=i.iso)||void 0===t?void 0:t.allowApi),(0,d.createElement)(d.StrictMode,null,(0,d.createElement)("div",{className:"interface-interface-skeleton__content"}),(0,d.createElement)(zn,{onSaveBlocks:o,onSaveContent:r}),(0,d.createElement)(Ln,{settings:i}),(0,d.createElement)(Fn,null),(0,d.createElement)(g.SlotFillProvider,null,(0,d.createElement)(g.DropZoneProvider,null,(0,d.createElement)(Ae,a()({},c,{settings:i}),n))))}))})(),r})()}));
//# sourceMappingURL=isolated-block-editor.min.js.map