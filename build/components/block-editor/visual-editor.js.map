{"version":3,"file":"visual-editor.js","names":["_classnames","_interopRequireDefault","require","_blockEditor","_editor","_data","_components","_element","_compose","_privateApis","_editorHeadingSlot","_footerSlot","createElement","Fragment","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_dangerousOptInToUns","__dangerousOptInToUnstableAPIsOnlyForCoreModules","lock","unlock","exports","_unlock","blockEditorPrivateApis","LayoutStyle","useLayoutClasses","useLayoutStyles","MaybeIframe","_ref","children","contentRef","shouldIframe","styles","style","ref","useMouseMoveTypingReset","__unstableEditorStyles","WritingFlow","className","flex","tabIndex","__unstableIframe","width","height","display","name","VisualEditor","_ref2","_useSelect","useSelect","select","_select","isFeatureActive","_select2","editorStore","getCurrentPostId","getCurrentPostType","getEditorSettings","_isTemplateMode","_wrapperBlockName","editorSettings","deviceType","isWelcomeGuideVisible","isTemplateMode","postContentAttributes","editedPostTemplate","undefined","wrapperBlockName","wrapperUniqueId","isBlockBasedTheme","__unstableIsBlockBasedTheme","_useSelect$editedPost","_useSelect2","isCleanNewPost","hasMetaBoxes","_useSelect3","_settings","blockEditorStore","getSettings","themeHasDisabledLayoutStyles","disableLayoutStyles","themeSupportsLayout","supportsLayout","isFocusMode","focusMode","desktopCanvasStyles","margin","flexFlow","background","templateModeStyles","borderRadius","border","borderBottom","resizedCanvasStyles","useResizeCanvas","globalLayoutSettings","useSetting","previewMode","toLowerCase","animatedStyles","paddingBottom","useRef","useMergeRefs","useClipboardHandler","useTypewriter","useTypingObserver","useBlockSelectionClearer","blockSelectionClearerRef","fallbackLayout","useMemo","type","newestPostContentAttributes","content","blocks","getPostContentAttributes","parseableContent","parse","layout","postContentLayoutClasses","blockListLayoutClass","classnames","postContentLayoutStyles","postContentLayout","inherit","contentSize","wideSize","blockListLayout","titleRef","useEffect","_titleRef$current","current","focus","concat","_toConsumableArray2","css","BlockTools","__unstableContentRef","VisualEditorGlobalKeyboardShortcuts","__unstableMotion","div","animate","padding","initial","selector","layoutDefinitions","definitions","Slot","mode","__experimentalRecursionProvider","blockName","uniqueId","BlockList","__experimentalLayout"],"sources":["../../../src/components/block-editor/visual-editor.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tWritingFlow,\n\tBlockList,\n\tBlockTools,\n\tstore as blockEditorStore,\n\t__unstableUseBlockSelectionClearer as useBlockSelectionClearer,\n\t__unstableUseTypewriter as useTypewriter,\n\t__unstableUseClipboardHandler as useClipboardHandler,\n\t__unstableUseTypingObserver as useTypingObserver,\n\t__experimentalUseResizeCanvas as useResizeCanvas,\n\t__unstableEditorStyles as EditorStyles,\n\tuseSetting,\n\t__unstableUseMouseMoveTypingReset as useMouseMoveTypingReset,\n\t__unstableIframe as Iframe,\n\t__experimentalRecursionProvider as RecursionProvider,\n\tprivateApis as blockEditorPrivateApis,\n} from '@wordpress/block-editor';\nimport {\n\tVisualEditorGlobalKeyboardShortcuts,\n\tstore as editorStore,\n} from '@wordpress/editor';\nimport { useSelect } from '@wordpress/data';\nimport { __unstableMotion as motion } from '@wordpress/components';\nimport { useEffect, useRef, useMemo } from '@wordpress/element';\nimport { useMergeRefs } from '@wordpress/compose';\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\n\n/**\n * Internal dependencies\n */\nimport EditorHeading from '../editor-heading-slot';\nimport FooterSlot from '../footer-slot';\n\nexport const { lock, unlock } =\n\t__dangerousOptInToUnstableAPIsOnlyForCoreModules(\n\t\t'I know using unstable features means my plugin or theme will inevitably break on the next WordPress release.',\n\t\t'@wordpress/edit-post'\n\t);\n\nconst { LayoutStyle, useLayoutClasses, useLayoutStyles } = unlock(\n\tblockEditorPrivateApis\n);\n\nfunction MaybeIframe( { children, contentRef, shouldIframe, styles, style } ) {\n\tconst ref = useMouseMoveTypingReset();\n\n\tif ( !shouldIframe ) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<EditorStyles styles={ styles } />\n\t\t\t\t<WritingFlow\n\t\t\t\t\tref={ contentRef }\n\t\t\t\t\tclassName=\"editor-styles-wrapper\"\n\t\t\t\t\tstyle={ { flex: '1', ...style } }\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</WritingFlow>\n\t\t\t</>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Iframe\n\t\t\tref={ ref }\n\t\t\tcontentRef={ contentRef }\n\t\t\tstyle={ { width: '100%', height: '100%', display: 'block' } }\n\t\t\tname=\"editor-canvas\"\n\t\t>\n\t\t\t<EditorStyles styles={ styles } />\n\t\t\t{ children }\n\t\t</Iframe>\n\t);\n}\n\n/**\n * This is a copy of packages/edit-post/src/components/visual-editor/index.js\n *\n * The original is not exported, and contains code for post titles\n *\n * @param {Object} args\n * @param args.styles\n */\nexport default function VisualEditor( { styles } ) {\n\tconst {\n\t\tdeviceType,\n\t\tisWelcomeGuideVisible,\n\t\tisTemplateMode,\n\t\tpostContentAttributes,\n\t\teditedPostTemplate = {},\n\t\twrapperBlockName,\n\t\twrapperUniqueId,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tisFeatureActive,\n\t\t} = select( 'isolated/editor' );\n\t\t// @ts-ignore\n\t\tconst { getCurrentPostId, getCurrentPostType, getEditorSettings } =\n\t\t\tselect( editorStore );\n\t\tconst _isTemplateMode = false;\n\t\tlet _wrapperBlockName;\n\n\t\tif ( getCurrentPostType() === 'wp_block' ) {\n\t\t\t_wrapperBlockName = 'core/block';\n\t\t} else if ( !_isTemplateMode ) {\n\t\t\t_wrapperBlockName = 'core/post-content';\n\t\t}\n\n\t\tconst editorSettings = getEditorSettings();\n\n\t\treturn {\n\t\t\tdeviceType: 'Desktop',\n\t\t\t// @ts-ignore\n\t\t\tisWelcomeGuideVisible: isFeatureActive( 'welcomeGuide' ),\n\t\t\tisTemplateMode: _isTemplateMode,\n\t\t\tpostContentAttributes: getEditorSettings().postContentAttributes,\n\t\t\t// Post template fetch returns a 404 on classic themes, which\n\t\t\t// messes with e2e tests, so check it's a block theme first.\n\t\t\teditedPostTemplate: undefined,\n\t\t\twrapperBlockName: _wrapperBlockName,\n\t\t\twrapperUniqueId: getCurrentPostId(),\n\t\t\tisBlockBasedTheme: editorSettings.__unstableIsBlockBasedTheme,\n\t\t};\n\t}, [] );\n\t// @ts-ignore\n\tconst { isCleanNewPost } = useSelect( editorStore );\n\tconst hasMetaBoxes = false;\n\tconst { themeHasDisabledLayoutStyles, themeSupportsLayout } =\n\t\tuseSelect( ( select ) => {\n\t\t\t// @ts-ignore\n\t\t\tconst _settings = select( blockEditorStore ).getSettings();\n\t\t\treturn {\n\t\t\t\tthemeHasDisabledLayoutStyles: _settings.disableLayoutStyles,\n\t\t\t\tthemeSupportsLayout: _settings.supportsLayout,\n\t\t\t\tisFocusMode: _settings.focusMode,\n\t\t\t};\n\t\t}, [] );\n\tconst desktopCanvasStyles = {\n\t\theight: '100%',\n\t\twidth: '100%',\n\t\tmargin: 0,\n\t\tdisplay: 'flex',\n\t\tflexFlow: 'column',\n\t\t// Default background color so that grey\n\t\t// .edit-post-editor-regions__content color doesn't show through.\n\t\tbackground: 'white',\n\t};\n\tconst templateModeStyles = {\n\t\t...desktopCanvasStyles,\n\t\tborderRadius: '2px 2px 0 0',\n\t\tborder: '1px solid #ddd',\n\t\tborderBottom: 0,\n\t};\n\tconst resizedCanvasStyles = useResizeCanvas( deviceType, isTemplateMode );\n\tconst globalLayoutSettings = useSetting( 'layout' );\n\tconst previewMode = 'is-' + deviceType.toLowerCase() + '-preview';\n\n\tlet animatedStyles = isTemplateMode\n\t\t? templateModeStyles\n\t\t: desktopCanvasStyles;\n\tif ( resizedCanvasStyles ) {\n\t\tanimatedStyles = resizedCanvasStyles;\n\t}\n\n\tlet paddingBottom;\n\n\t// Add a constant padding for the typewritter effect. When typing at the\n\t// bottom, there needs to be room to scroll up.\n\tif ( !hasMetaBoxes && !resizedCanvasStyles && !isTemplateMode ) {\n\t\tpaddingBottom = '40vh';\n\t}\n\n\tconst ref = useRef();\n\tconst contentRef = useMergeRefs( [\n\t\tref,\n\t\tuseClipboardHandler(),\n\t\tuseTypewriter(),\n\t\tuseTypingObserver(),\n\t\tuseBlockSelectionClearer(),\n\t] );\n\n\tconst blockSelectionClearerRef = useBlockSelectionClearer();\n\n\t// fallbackLayout is used if there is no Post Content,\n\t// and for Post Title.\n\tconst fallbackLayout = useMemo( () => {\n\t\tif ( isTemplateMode ) {\n\t\t\treturn { type: 'default' };\n\t\t}\n\n\t\tif ( themeSupportsLayout ) {\n\t\t\t// We need to ensure support for wide and full alignments,\n\t\t\t// so we add the constrained type.\n\t\t\treturn { ...globalLayoutSettings, type: 'constrained' };\n\t\t}\n\t\t// Set default layout for classic themes so all alignments are supported.\n\t\treturn { type: 'default' };\n\t}, [ isTemplateMode, themeSupportsLayout, globalLayoutSettings ] );\n\n\tconst newestPostContentAttributes = useMemo( () => {\n\t\t// @ts-ignore\n\t\tif ( !editedPostTemplate?.content && !editedPostTemplate?.blocks ) {\n\t\t\treturn postContentAttributes;\n\t\t}\n\t\t// When in template editing mode, we can access the blocks directly.\n\t\t// @ts-ignore\n\t\tif ( editedPostTemplate?.blocks ) {\n\t\t\t// @ts-ignore\n\t\t\treturn getPostContentAttributes( editedPostTemplate?.blocks );\n\t\t}\n\t\t// If there are no blocks, we have to parse the content string.\n\t\t// Best double-check it's a string otherwise the parse function gets unhappy.\n\t\t// @ts-ignore\n\t\tconst parseableContent = typeof editedPostTemplate?.content === 'string' ? editedPostTemplate?.content : '';\n\n\t\t// @ts-ignore\n\t\treturn getPostContentAttributes( parse( parseableContent ) ) || {};\n\t}, [\n\t\t// @ts-ignore\n\t\teditedPostTemplate?.content,\n\t\t// @ts-ignore\n\t\teditedPostTemplate?.blocks,\n\t\tpostContentAttributes,\n\t] );\n\n\tconst layout = newestPostContentAttributes?.layout || {};\n\n\tconst postContentLayoutClasses = useLayoutClasses(\n\t\tnewestPostContentAttributes,\n\t\t'core/post-content'\n\t);\n\n\tconst blockListLayoutClass = classnames(\n\t\t{\n\t\t\t'is-layout-flow': !themeSupportsLayout,\n\t\t},\n\t\tthemeSupportsLayout && postContentLayoutClasses\n\t);\n\n\tconst postContentLayoutStyles = useLayoutStyles(\n\t\tnewestPostContentAttributes,\n\t\t'core/post-content',\n\t\t'.block-editor-block-list__layout.is-root-container'\n\t);\n\n\t// Update type for blocks using legacy layouts.\n\tconst postContentLayout = useMemo( () => {\n\t\treturn layout &&\n\t\t\t( layout?.type === 'constrained' ||\n\t\t\t\tlayout?.inherit ||\n\t\t\t\tlayout?.contentSize ||\n\t\t\t\tlayout?.wideSize )\n\t\t\t? { ...globalLayoutSettings, ...layout, type: 'constrained' }\n\t\t\t: { ...globalLayoutSettings, ...layout, type: 'default' };\n\t}, [\n\t\tlayout?.type,\n\t\tlayout?.inherit,\n\t\tlayout?.contentSize,\n\t\tlayout?.wideSize,\n\t\tglobalLayoutSettings,\n\t] );\n\n\t// If there is a Post Content block we use its layout for the block list;\n\t// if not, this must be a classic theme, in which case we use the fallback layout.\n\tconst blockListLayout = postContentAttributes\n\t\t? postContentLayout\n\t\t: fallbackLayout;\n\n\tconst titleRef = useRef();\n\tuseEffect( () => {\n\t\tif ( isWelcomeGuideVisible || !isCleanNewPost() ) {\n\t\t\treturn;\n\t\t}\n\t\t// @ts-ignore\n\t\ttitleRef?.current?.focus();\n\t}, [ isWelcomeGuideVisible, isCleanNewPost ] );\n\n\tstyles = useMemo(\n\t\t() => [\n\t\t\t...styles,\n\t\t\t{\n\t\t\t\t// We should move this in to future to the body.\n\t\t\t\tcss:\n\t\t\t\t\t`.edit-post-visual-editor__post-title-wrapper{margin-top:4rem}` +\n\t\t\t\t\t( paddingBottom\n\t\t\t\t\t\t? `body{padding-bottom:${ paddingBottom }}`\n\t\t\t\t\t\t: '' ),\n\t\t\t},\n\t\t],\n\t\t[ styles ]\n\t);\n\n\treturn (\n\t\t<BlockTools\n\t\t\t__unstableContentRef={ ref }\n\t\t\tclassName={ classnames( 'edit-post-visual-editor', {\n\t\t\t\t'is-template-mode': isTemplateMode,\n\t\t\t} ) }\n\t\t>\n\t\t\t<VisualEditorGlobalKeyboardShortcuts />\n\t\t\t<motion.div\n\t\t\t\tclassName=\"edit-post-visual-editor__content-area\"\n\t\t\t\tanimate={ {\n\t\t\t\t\tpadding: isTemplateMode ? '48px 48px 0' : 0,\n\t\t\t\t} }\n\t\t\t\tref={ blockSelectionClearerRef }\n\t\t\t>\n\t\t\t\t<motion.div\n\t\t\t\t\tanimate={ animatedStyles }\n\t\t\t\t\tinitial={ desktopCanvasStyles }\n\t\t\t\t\tclassName={ previewMode }\n\t\t\t\t>\n\t\t\t\t\t<MaybeIframe\n\t\t\t\t\t\tshouldIframe={\n\t\t\t\t\t\t\tisTemplateMode ||\n\t\t\t\t\t\t\tdeviceType === 'Tablet' ||\n\t\t\t\t\t\t\tdeviceType === 'Mobile'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t\t\tstyles={ styles }\n\t\t\t\t\t\tstyle={ {} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ themeSupportsLayout &&\n\t\t\t\t\t\t\t!themeHasDisabledLayoutStyles &&\n\t\t\t\t\t\t\t!isTemplateMode && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<LayoutStyle\n\t\t\t\t\t\t\t\t\t\tselector=\".edit-post-visual-editor__post-title-wrapper, .block-editor-block-list__layout.is-root-container\"\n\t\t\t\t\t\t\t\t\t\tlayout={ fallbackLayout }\n\t\t\t\t\t\t\t\t\t\tlayoutDefinitions={\n\t\t\t\t\t\t\t\t\t\t\tglobalLayoutSettings?.definitions\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ postContentLayoutStyles && (\n\t\t\t\t\t\t\t\t\t\t<LayoutStyle\n\t\t\t\t\t\t\t\t\t\t\tlayout={ postContentLayout }\n\t\t\t\t\t\t\t\t\t\t\tcss={ postContentLayoutStyles }\n\t\t\t\t\t\t\t\t\t\t\tlayoutDefinitions={\n\t\t\t\t\t\t\t\t\t\t\t\tglobalLayoutSettings?.definitions\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t<EditorHeading.Slot mode=\"visual\" />\n\n\t\t\t\t\t\t<RecursionProvider\n\t\t\t\t\t\t\tblockName={ wrapperBlockName }\n\t\t\t\t\t\t\tuniqueId={ wrapperUniqueId }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockList\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tisTemplateMode\n\t\t\t\t\t\t\t\t\t\t? 'wp-site-blocks'\n\t\t\t\t\t\t\t\t\t\t: `${ blockListLayoutClass } wp-block-post-content` // Ensure root level blocks receive default/flow blockGap styling rules.\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t__experimentalLayout={ blockListLayout }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RecursionProvider>\n\n\t\t\t\t\t\t<FooterSlot.Slot mode=\"visual\" />\n\t\t\t\t\t</MaybeIframe>\n\t\t\t\t</motion.div>\n\t\t\t</motion.div>\n\t\t</BlockTools>\n\t);\n};\n"],"mappings":"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"}