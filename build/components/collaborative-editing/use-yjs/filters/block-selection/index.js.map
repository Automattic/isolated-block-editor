{"version":3,"file":"index.js","names":["_hooks","require","_data","createElement","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","addSelectionBorders","OriginalComponent","props","_useSelect","useSelect","select","peers","getCollabPeers","matchedPeer","values","find","peer","_peer$start","_peer$end","start","clientId","end","isSelected","color","className","undefined","wrapperProps","style","addFilterCollabBlockSelection","addFilter","exports"],"sources":["../../../../../../src/components/collaborative-editing/use-yjs/filters/block-selection/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\n\n/**\n * Adds peer selected className to the block-list-block component.\n *\n * @param {Object} OriginalComponent The original BlockListBlock component.\n * @return {Object} The enhanced component.\n */\nconst addSelectionBorders = ( OriginalComponent ) => {\n\treturn ( props ) => {\n\t\tconst { isSelected, color } = useSelect(\n\t\t\t( select ) => {\n\t\t\t\t// @ts-ignore\n\t\t\t\tconst peers = select( 'isolated/editor' ).getCollabPeers();\n\t\t\t\tconst matchedPeer = Object.values( peers ).find(\n\t\t\t\t\t( peer ) => peer.start?.clientId === props.clientId && peer.end?.clientId === props.clientId\n\t\t\t\t);\n\t\t\t\treturn {\n\t\t\t\t\tisSelected: !! matchedPeer,\n\t\t\t\t\tcolor: matchedPeer?.color,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ props.clientId ]\n\t\t);\n\t\treturn (\n\t\t\t<OriginalComponent\n\t\t\t\t{ ...props }\n\t\t\t\tclassName={ isSelected ? 'is-iso-editor-collab-peer-selected' : undefined }\n\t\t\t\twrapperProps={ {\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t'--iso-editor-collab-peer-block-color': color,\n\t\t\t\t\t},\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t};\n};\n\nexport const addFilterCollabBlockSelection = () => {\n\taddFilter( 'editor.BlockListBlock', 'isolated-block-editor', addSelectionBorders, 9 );\n};\n"],"mappings":"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"}