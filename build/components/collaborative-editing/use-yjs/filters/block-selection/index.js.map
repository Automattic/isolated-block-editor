{"version":3,"file":"index.js","names":["addSelectionBorders","OriginalComponent","props","useSelect","select","peers","getCollabPeers","matchedPeer","Object","values","find","peer","start","clientId","end","isSelected","color","undefined","style","addFilterCollabBlockSelection","addFilter"],"sources":["../../../../../../src/components/collaborative-editing/use-yjs/filters/block-selection/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\n\n/**\n * Adds peer selected className to the block-list-block component.\n *\n * @param {Object} OriginalComponent The original BlockListBlock component.\n * @return {Object} The enhanced component.\n */\nconst addSelectionBorders = ( OriginalComponent ) => {\n\treturn ( props ) => {\n\t\tconst { isSelected, color } = useSelect(\n\t\t\t( select ) => {\n\t\t\t\t// @ts-ignore\n\t\t\t\tconst peers = select( 'isolated/editor' ).getCollabPeers();\n\t\t\t\tconst matchedPeer = Object.values( peers ).find(\n\t\t\t\t\t( peer ) => peer.start?.clientId === props.clientId && peer.end?.clientId === props.clientId\n\t\t\t\t);\n\t\t\t\treturn {\n\t\t\t\t\tisSelected: !! matchedPeer,\n\t\t\t\t\tcolor: matchedPeer?.color,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ props.clientId ]\n\t\t);\n\t\treturn (\n\t\t\t<OriginalComponent\n\t\t\t\t{ ...props }\n\t\t\t\tclassName={ isSelected ? 'is-iso-editor-collab-peer-selected' : undefined }\n\t\t\t\twrapperProps={ {\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t'--iso-editor-collab-peer-block-color': color,\n\t\t\t\t\t},\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t};\n};\n\nexport const addFilterCollabBlockSelection = () => {\n\taddFilter( 'editor.BlockListBlock', 'isolated-block-editor', addSelectionBorders, 9 );\n};\n"],"mappings":";;;;;;;;;;;AAGA;;AACA;;AAKA;;;;AATA;AACA;AACA;;AAIA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMA,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAEC,iBAAF,EAAyB;EACpD,OAAO,UAAEC,KAAF,EAAa;IACnB,iBAA8B,IAAAC,eAAA,EAC7B,UAAEC,MAAF,EAAc;MACb;MACA,IAAMC,KAAK,GAAGD,MAAM,CAAE,iBAAF,CAAN,CAA4BE,cAA5B,EAAd;MACA,IAAMC,WAAW,GAAGC,MAAM,CAACC,MAAP,CAAeJ,KAAf,EAAuBK,IAAvB,CACnB,UAAEC,IAAF;QAAA;;QAAA,OAAY,gBAAAA,IAAI,CAACC,KAAL,4DAAYC,QAAZ,MAAyBX,KAAK,CAACW,QAA/B,IAA2C,cAAAF,IAAI,CAACG,GAAL,wDAAUD,QAAV,MAAuBX,KAAK,CAACW,QAApF;MAAA,CADmB,CAApB;MAGA,OAAO;QACNE,UAAU,EAAE,CAAC,CAAER,WADT;QAENS,KAAK,EAAET,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAES;MAFd,CAAP;IAIA,CAX4B,EAY7B,CAAEd,KAAK,CAACW,QAAR,CAZ6B,CAA9B;IAAA,IAAQE,UAAR,cAAQA,UAAR;IAAA,IAAoBC,KAApB,cAAoBA,KAApB;;IAcA,OACC,cAAC,iBAAD,gCACMd,KADN;MAEC,SAAS,EAAGa,UAAU,GAAG,oCAAH,GAA0CE,SAFjE;MAGC,YAAY,EAAG;QACdC,KAAK,EAAE;UACN,wCAAwCF;QADlC;MADO;IAHhB,GADD;EAWA,CA1BD;AA2BA,CA5BD;;AA8BO,IAAMG,6BAA6B,GAAG,SAAhCA,6BAAgC,GAAM;EAClD,IAAAC,gBAAA,EAAW,uBAAX,EAAoC,uBAApC,EAA6DpB,mBAA7D,EAAkF,CAAlF;AACA,CAFM"}