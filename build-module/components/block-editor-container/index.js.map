{"version":3,"file":"index.js","names":["classnames","compose","useResizeObserver","ErrorBoundary","withDispatch","withSelect","ClickOutsideWrapper","BlockEditorContents","HotSwapper","SIZE_LARGE","SIZE_MEDIUM","BlockEditorContainer","props","children","settings","className","onError","renderMoreMenu","onLoad","onInput","onChange","blocks","isEditorReady","editorMode","isEditing","setEditing","hasFixedToolbar","isPreview","resizeListener","width","classes","select","getEditorMode","isFeatureActive","isOptionActive","dispatch"],"sources":["../../../src/components/block-editor-container/index.js"],"sourcesContent":["// @ts-nocheck\n/**\n * External dependencies\n */\n\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { compose, useResizeObserver } from '@wordpress/compose';\nimport { ErrorBoundary } from '@wordpress/editor';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport ClickOutsideWrapper from './click-outside';\nimport BlockEditorContents from '../block-editor-contents';\nimport HotSwapper from './hot-swapper';\nimport './style.scss';\n\n/** @typedef {import('../../index').BlockEditorSettings} BlockEditorSettings */\n/** @typedef {import('../../index').OnError} OnError */\n/** @typedef {import('../../index').OnMore} OnMore */\n/** @typedef {import('../../store/editor/reducer').EditorMode} EditorMode */\n/** @typedef {import('../../index').OnLoad} OnLoad */\n/** @typedef {import('../block-editor-contents/index').OnUpdate} OnUpdate */\n\n/**\n * Set editing callback\n *\n * @callback OnSetEditing\n * @param {boolean} isEditing\n */\n\nconst SIZE_LARGE = 720;\nconst SIZE_MEDIUM = 480;\n\n/**\n * Contains the block contents. Handles the hot-swapping of the redux stores, as well as applying the root CSS classes\n *\n * @param {Object} props - Component props\n * @param {Object} props.children - Child components\n * @param {boolean} props.isEditorReady - The editor is ready for editing\n * @param {boolean} props.isEditing - This editor is being edited in\n * @param {boolean} props.isPreview - Whether preview mode is enabled\n * @param {boolean} props.hasFixedToolbar - Has fixed toolbar\n * @param {EditorMode} props.editorMode - 'text' or 'visual'\n * @param {string} props.className - additional class names\n * @param {BlockEditorSettings} props.settings - Settings\n * @param {OnError} props.onError - Error callback\n * @param {OnMore} props.renderMoreMenu - Callback to render additional items in the more menu\n * @param {OnSetEditing} props.setEditing - Set the mode to editing\n * @param {OnLoad} props.onLoad - Load initial blocks\n * @param {OnUpdate} [props.onInput] - Gutenberg's onInput callback\n * @param {OnUpdate} [props.onChange] - Gutenberg's onChange callback\n * @param {object[]} [props.blocks] - Gutenberg's blocks\n */\nfunction BlockEditorContainer( props ) {\n\tconst { children, settings, className, onError, renderMoreMenu, onLoad, onInput, onChange, blocks } = props;\n\tconst { isEditorReady, editorMode, isEditing, setEditing, hasFixedToolbar, isPreview } = props;\n\tconst [ resizeListener, { width } ] = useResizeObserver();\n\tconst classes = classnames( className, {\n\t\t'iso-editor': true,\n\n\t\t'is-large': width ? width >= SIZE_LARGE : false,\n\t\t'is-medium': width ? width >= SIZE_MEDIUM && width < SIZE_LARGE : true,\n\t\t'is-small': width ? width < SIZE_MEDIUM : false,\n\n\t\t'iso-editor__loading': ! isEditorReady,\n\t\t'iso-editor__selected': isEditing,\n\n\t\t// Match Gutenberg\n\t\t'block-editor': true,\n\t\t'edit-post-layout': true,\n\t\t'has-fixed-toolbar': hasFixedToolbar,\n\t\t[ 'is-mode-' + editorMode ]: true,\n\t\t'is-preview-mode': isPreview,\n\t} );\n\n\treturn (\n\t\t<div className={ classes }>\n\t\t\t<ErrorBoundary onError={ onError }>\n\t\t\t\t<HotSwapper />\n\n\t\t\t\t{ resizeListener }\n\n\t\t\t\t<ClickOutsideWrapper\n\t\t\t\t\tonOutside={ () => setEditing( false ) }\n\t\t\t\t\tonFocus={ () => ! isEditing && setEditing( true ) }\n\t\t\t\t>\n\t\t\t\t\t<BlockEditorContents\n\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t\trenderMoreMenu={ renderMoreMenu }\n\t\t\t\t\t\tonLoad={ onLoad }\n\t\t\t\t\t\tonInput={ onInput }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</BlockEditorContents>\n\t\t\t\t</ClickOutsideWrapper>\n\t\t\t</ErrorBoundary>\n\t\t</div>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { isEditorReady, getEditorMode, isEditing, isFeatureActive, isOptionActive } = select(\n\t\t\t'isolated/editor'\n\t\t);\n\n\t\treturn {\n\t\t\tisEditorReady: isEditorReady(),\n\t\t\teditorMode: getEditorMode(),\n\t\t\tisEditing: isEditing(),\n\t\t\thasFixedToolbar: isFeatureActive( 'fixedToolbar' ),\n\t\t\tisPreview: isOptionActive( 'preview' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { setEditing } = dispatch( 'isolated/editor' );\n\n\t\treturn {\n\t\t\tsetEditing,\n\t\t};\n\t} ),\n] )( BlockEditorContainer );\n"],"mappings":"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"}