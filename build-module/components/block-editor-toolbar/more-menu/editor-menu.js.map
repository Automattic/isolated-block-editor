{"version":3,"file":"editor-menu.js","names":["MenuGroup","MenuItem","__","_x","withDispatch","withSelect","compose","check","EditorMenu","_ref","_settings$iso","_settings$iso2","_settings$iso2$moreMe","onClose","editorMode","onSetMode","isCodeEditingEnabled","settings","setMode","mode","iso","moreMenu","editor","createElement","label","icon","isSelected","onClick","role","select","getEditorMode","codeEditingEnabled","getEditorSettings","dispatch","setEditorMode"],"sources":["../../../../src/components/block-editor-toolbar/more-menu/editor-menu.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { MenuGroup, MenuItem } from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { check } from '@wordpress/icons';\n\n/** @typedef {import('./index').OnClose} OnClose */\n/** @typedef {import('../../../index').BlockEditorSettings} BlockEditorSettings */\n\n/**\n * Close dropdown callback\n *\n * @callback OnSetMode\n * @param {string} mode\n */\n\n/**\n * The 'more menu' editor section\n *\n * @param {Object} props - Component props\n * @param {boolean} props.isCodeEditingEnabled\n * @param {string} props.editorMode\n * @param {OnClose} props.onClose - Callback to close the menu\n * @param {OnSetMode} props.onSetMode\n * @param {BlockEditorSettings} props.settings - Settings\n */\nfunction EditorMenu( { onClose, editorMode, onSetMode, isCodeEditingEnabled, settings } ) {\n\t/**\n\t * @param {string} mode\n\t */\n\tconst setMode = ( mode ) => {\n\t\tonSetMode( mode );\n\t\tonClose();\n\t};\n\n\tif ( ! isCodeEditingEnabled ) {\n\t\treturn null;\n\t}\n\n\tif ( settings?.iso?.moreMenu === false || ! settings?.iso?.moreMenu?.editor ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<MenuGroup label={ _x( 'Editor', 'noun' ) }>\n\t\t\t<MenuItem\n\t\t\t\ticon={ editorMode === 'visual' && check }\n\t\t\t\tisSelected={ editorMode === 'visual' }\n\t\t\t\tonClick={ () => setMode( 'visual' ) }\n\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t>\n\t\t\t\t{ __( 'Visual editor' ) }\n\t\t\t</MenuItem>\n\n\t\t\t<MenuItem\n\t\t\t\ticon={ editorMode === 'text' && check }\n\t\t\t\tisSelected={ editorMode === 'text' }\n\t\t\t\tonClick={ () => setMode( 'text' ) }\n\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t>\n\t\t\t\t{ __( 'Code editor' ) }\n\t\t\t</MenuItem>\n\t\t</MenuGroup>\n\t);\n}\n\n// @ts-ignore\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getEditorMode } = select( 'isolated/editor' );\n\t\tconst { codeEditingEnabled } = select( 'core/editor' ).getEditorSettings();\n\n\t\treturn {\n\t\t\teditorMode: getEditorMode(),\n\t\t\tisCodeEditingEnabled: codeEditingEnabled,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonSetMode( mode ) {\n\t\t\tdispatch( 'isolated/editor' ).setEditorMode( mode );\n\t\t},\n\t} ) ),\n] )( EditorMenu );\n"],"mappings":";AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,uBAAuB;AAC3D,SAASC,EAAE,EAAEC,EAAE,QAAQ,iBAAiB;AACxC,SAASC,YAAY,EAAEC,UAAU,QAAQ,iBAAiB;AAC1D,SAASC,OAAO,QAAQ,oBAAoB;AAC5C,SAASC,KAAK,QAAQ,kBAAkB;;AAExC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,UAAUA,CAAAC,IAAA,EAAuE;EAAA,IAAAC,aAAA,EAAAC,cAAA,EAAAC,qBAAA;EAAA,IAArE;IAAEC,OAAO;IAAEC,UAAU;IAAEC,SAAS;IAAEC,oBAAoB;IAAEC;EAAS,CAAC,GAAAR,IAAA;EACtF;AACD;AACA;EACC,MAAMS,OAAO,GAAKC,IAAI,IAAM;IAC3BJ,SAAS,CAAEI,IAAI,CAAE;IACjBN,OAAO,EAAE;EACV,CAAC;EAED,IAAK,CAAEG,oBAAoB,EAAG;IAC7B,OAAO,IAAI;EACZ;EAEA,IAAK,CAAAC,QAAQ,aAARA,QAAQ,wBAAAP,aAAA,GAARO,QAAQ,CAAEG,GAAG,cAAAV,aAAA,uBAAbA,aAAA,CAAeW,QAAQ,MAAK,KAAK,IAAI,EAAEJ,QAAQ,aAARA,QAAQ,gBAAAN,cAAA,GAARM,QAAQ,CAAEG,GAAG,cAAAT,cAAA,gBAAAC,qBAAA,GAAbD,cAAA,CAAeU,QAAQ,cAAAT,qBAAA,eAAvBA,qBAAA,CAAyBU,MAAM,GAAG;IAC7E,OAAO,IAAI;EACZ;EAEA,OACCC,aAAA,CAACvB,SAAS;IAACwB,KAAK,EAAGrB,EAAE,CAAE,QAAQ,EAAE,MAAM;EAAI,GAC1CoB,aAAA,CAACtB,QAAQ;IACRwB,IAAI,EAAGX,UAAU,KAAK,QAAQ,IAAIP,KAAO;IACzCmB,UAAU,EAAGZ,UAAU,KAAK,QAAU;IACtCa,OAAO,EAAGA,CAAA,KAAMT,OAAO,CAAE,QAAQ,CAAI;IACrCU,IAAI,EAAC;EAAkB,GAErB1B,EAAE,CAAE,eAAe,CAAE,CACb,EAEXqB,aAAA,CAACtB,QAAQ;IACRwB,IAAI,EAAGX,UAAU,KAAK,MAAM,IAAIP,KAAO;IACvCmB,UAAU,EAAGZ,UAAU,KAAK,MAAQ;IACpCa,OAAO,EAAGA,CAAA,KAAMT,OAAO,CAAE,MAAM,CAAI;IACnCU,IAAI,EAAC;EAAkB,GAErB1B,EAAE,CAAE,aAAa,CAAE,CACX,CACA;AAEd;;AAEA;AACA,eAAeI,OAAO,CAAE,CACvBD,UAAU,CAAIwB,MAAM,IAAM;EACzB,MAAM;IAAEC;EAAc,CAAC,GAAGD,MAAM,CAAE,iBAAiB,CAAE;EACrD,MAAM;IAAEE;EAAmB,CAAC,GAAGF,MAAM,CAAE,aAAa,CAAE,CAACG,iBAAiB,EAAE;EAE1E,OAAO;IACNlB,UAAU,EAAEgB,aAAa,EAAE;IAC3Bd,oBAAoB,EAAEe;EACvB,CAAC;AACF,CAAC,CAAE,EACH3B,YAAY,CAAI6B,QAAQ,KAAQ;EAC/BlB,SAASA,CAAEI,IAAI,EAAG;IACjBc,QAAQ,CAAE,iBAAiB,CAAE,CAACC,aAAa,CAAEf,IAAI,CAAE;EACpD;AACD,CAAC,CAAE,CAAE,CACL,CAAE,CAAEX,UAAU,CAAE"}