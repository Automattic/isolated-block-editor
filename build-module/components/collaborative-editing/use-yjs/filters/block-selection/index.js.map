{"version":3,"file":"index.js","names":["addFilter","useSelect","addSelectionBorders","OriginalComponent","props","isSelected","color","select","peers","getCollabPeers","matchedPeer","Object","values","find","peer","start","clientId","end","createElement","className","undefined","wrapperProps","style","addFilterCollabBlockSelection"],"sources":["../../../../../../src/components/collaborative-editing/use-yjs/filters/block-selection/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\n\n/**\n * Adds peer selected className to the block-list-block component.\n *\n * @param {Object} OriginalComponent The original BlockListBlock component.\n * @return {Object} The enhanced component.\n */\nconst addSelectionBorders = ( OriginalComponent ) => {\n\treturn ( props ) => {\n\t\tconst { isSelected, color } = useSelect(\n\t\t\t( select ) => {\n\t\t\t\t// @ts-ignore\n\t\t\t\tconst peers = select( 'isolated/editor' ).getCollabPeers();\n\t\t\t\tconst matchedPeer = Object.values( peers ).find(\n\t\t\t\t\t( peer ) => peer.start?.clientId === props.clientId && peer.end?.clientId === props.clientId\n\t\t\t\t);\n\t\t\t\treturn {\n\t\t\t\t\tisSelected: !! matchedPeer,\n\t\t\t\t\tcolor: matchedPeer?.color,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ props.clientId ]\n\t\t);\n\t\treturn (\n\t\t\t<OriginalComponent\n\t\t\t\t{ ...props }\n\t\t\t\tclassName={ isSelected ? 'is-iso-editor-collab-peer-selected' : undefined }\n\t\t\t\twrapperProps={ {\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t'--iso-editor-collab-peer-block-color': color,\n\t\t\t\t\t},\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t};\n};\n\nexport const addFilterCollabBlockSelection = () => {\n\taddFilter( 'editor.BlockListBlock', 'isolated-block-editor', addSelectionBorders, 9 );\n};\n"],"mappings":";AAAA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,SAAS,QAAQ,iBAAiB;;AAE3C;AACA;AACA;AACA,OAAO,cAAc;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,mBAAmB,GAAKC,iBAAiB,IAAM;EACpD,OAASC,KAAK,IAAM;IACnB,MAAM;MAAEC,UAAU;MAAEC;IAAM,CAAC,GAAGL,SAAS,CACpCM,MAAM,IAAM;MACb;MACA,MAAMC,KAAK,GAAGD,MAAM,CAAE,iBAAkB,CAAC,CAACE,cAAc,CAAC,CAAC;MAC1D,MAAMC,WAAW,GAAGC,MAAM,CAACC,MAAM,CAAEJ,KAAM,CAAC,CAACK,IAAI,CAC5CC,IAAI,IAAMA,IAAI,CAACC,KAAK,EAAEC,QAAQ,KAAKZ,KAAK,CAACY,QAAQ,IAAIF,IAAI,CAACG,GAAG,EAAED,QAAQ,KAAKZ,KAAK,CAACY,QACrF,CAAC;MACD,OAAO;QACNX,UAAU,EAAE,CAAC,CAAEK,WAAW;QAC1BJ,KAAK,EAAEI,WAAW,EAAEJ;MACrB,CAAC;IACF,CAAC,EACD,CAAEF,KAAK,CAACY,QAAQ,CACjB,CAAC;IACD,OACCE,aAAA,CAACf,iBAAiB;MAAA,GACZC,KAAK;MACVe,SAAS,EAAGd,UAAU,GAAG,oCAAoC,GAAGe,SAAW;MAC3EC,YAAY,EAAG;QACdC,KAAK,EAAE;UACN,sCAAsC,EAAEhB;QACzC;MACD;IAAG,CACH,CAAC;EAEJ,CAAC;AACF,CAAC;AAED,OAAO,MAAMiB,6BAA6B,GAAGA,CAAA,KAAM;EAClDvB,SAAS,CAAE,uBAAuB,EAAE,uBAAuB,EAAEE,mBAAmB,EAAE,CAAE,CAAC;AACtF,CAAC"}