{"version":3,"file":"sidebar.js","names":["BlockInspector","store","blockEditorStore","cog","keyboardShortcutsStore","interfaceStore","useContext","privateApis","componentsPrivateApis","__","useSelect","useDispatch","default","SettingsHeader","sidebars","Document","ComplementaryArea","unlock","Tabs","isActiveArea","area","document","block","includes","SettingsSidebarInternal","documentInspector","keyboardShortcut","sidebarName","tabsContextValue","Context","createElement","className","identifier","header","Provider","value","closeLabel","headerClassName","title","toggleShortcut","icon","isActiveByDefault","TabPanel","tabId","focusable","Slot","SettingsSidebar","isSettingsSidebarActive","select","sidebar","getActiveComplementaryArea","isSettingsSidebar","getBlockSelectionStart","shortcut","getShortcutRepresentation","openGeneralSidebar","onTabSelect","selectedTabId","onSelect"],"sources":["../../../src/components/block-editor/sidebar.js"],"sourcesContent":["// @ts-nocheck\n/**\n * WordPress dependencies\n */\nimport { BlockInspector, store as blockEditorStore } from '@wordpress/block-editor';\nimport { cog } from '@wordpress/icons';\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\nimport { store as interfaceStore } from '@wordpress/interface';\nimport { useContext } from '@wordpress/element';\nimport {privateApis as componentsPrivateApis} from \"@wordpress/components\";\n\n/**\n * Internal dependencies\n */\n\nimport { __ } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {default as SettingsHeader, sidebars} from './sidebar-heading';\nimport Document from '../document';\nimport ComplementaryArea from '../complementary-area';\nimport { unlock } from './unlock';\n\nconst { Tabs } = unlock( componentsPrivateApis );\n\nfunction isActiveArea( area ) {\n\treturn [ sidebars.document, sidebars.block ].includes( area )\n}\n\nconst SettingsSidebarInternal = ( { documentInspector, keyboardShortcut, sidebarName } ) => {\n\t// Because of the `ComplementaryArea`, we\n\t// need to forward the `Tabs` context so it can be passed through the\n\t// underlying slot/fill.\n\tconst tabsContextValue = useContext( Tabs.Context );\n\n\treturn (\n\t\t<ComplementaryArea\n\t\t\tclassName=\"iso-sidebar\"\n\t\t\tidentifier={ sidebarName }\n\t\t\theader={\n\t\t\t\t<Tabs.Context.Provider value={ tabsContextValue }>\n\t\t\t\t\t<SettingsHeader documentInspector={ documentInspector } />\n\t\t\t\t</Tabs.Context.Provider> }\n\t\t\tcloseLabel={ __( 'Close settings' ) }\n\t\t\theaderClassName=\"edit-post-sidebar__panel-tabs\"\n\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\ttitle={ __( 'Settings' ) }\n\t\t\ttoggleShortcut={ keyboardShortcut }\n\t\t\ticon={ cog }\n\t\t\tisActiveByDefault={ false }\n\t\t>\n\t\t\t<Tabs.Context.Provider value={ tabsContextValue }>\n\t\t\t\t<Tabs.TabPanel tabId={ sidebars.document } focusable={ false }>\n\t\t\t\t\t<Document.Slot />\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t<Tabs.TabPanel tabId={ sidebars.block } focusable={ false }>\n\t\t\t\t\t<BlockInspector />\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t</Tabs.Context.Provider>\n\t\t</ComplementaryArea>\n\t);\n};\n\nconst SettingsSidebar = ( { documentInspector } ) => {\n\tconst { sidebarName, keyboardShortcut, isSettingsSidebarActive } = useSelect( ( select ) => {\n\t\tlet sidebar = select( interfaceStore ).getActiveComplementaryArea( 'isolated/editor' );\n\n\t\tlet isSettingsSidebar = true;\n\t\tif ( ! isActiveArea( sidebar ) ) {\n\t\t\tisSettingsSidebar = false;\n\t\t\tif ( select( blockEditorStore ).getBlockSelectionStart() ) {\n\t\t\t\tsidebar = sidebars.block;\n\t\t\t}\n\t\t\tsidebar = sidebars.document;\n\t\t}\n\n\t\tconst shortcut = select( keyboardShortcutsStore ).getShortcutRepresentation( 'core/edit-post/toggle-sidebar' );\n\t\treturn {\n\t\t\tsidebarName: sidebar,\n\t\t\tkeyboardShortcut: shortcut,\n\t\t\tisSettingsSidebarActive: isSettingsSidebar,\n\t\t};\n\t}, [] );\n\n\tconst { openGeneralSidebar: onTabSelect } = useDispatch( 'isolated/editor' );\n\n\treturn <Tabs\n\t\t// Due to how this component is controlled (via a value from the\n\t\t// `interfaceStore`), when the sidebar closes the currently selected\n\t\t// tab can't be found. This causes the component to continuously reset\n\t\t// the selection to `null` in an infinite loop.Proactively setting\n\t\t// the selected tab to `null` avoids that.\n\t\tselectedTabId={ isSettingsSidebarActive ? sidebarName : null }\n\t\tonSelect={ onTabSelect }\n\t>\n\t\t<SettingsSidebarInternal documentInspector={ documentInspector }  keyboardShortcut={keyboardShortcut} sidebarName={sidebarName}/>\n\t</Tabs>;\n}\n\nexport default SettingsSidebar;\n"],"mappings":"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"}