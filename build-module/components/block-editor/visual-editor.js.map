{"version":3,"file":"visual-editor.js","names":["classnames","WritingFlow","BlockList","BlockTools","store","blockEditorStore","__unstableUseBlockSelectionClearer","useBlockSelectionClearer","__unstableUseTypewriter","useTypewriter","__unstableUseClipboardHandler","useClipboardHandler","__unstableUseTypingObserver","useTypingObserver","__experimentalUseResizeCanvas","useResizeCanvas","__unstableEditorStyles","EditorStyles","useSetting","__experimentalLayoutStyle","LayoutStyle","__unstableUseMouseMoveTypingReset","useMouseMoveTypingReset","__unstableIframe","Iframe","__experimentalRecursionProvider","RecursionProvider","__experimentaluseLayoutClasses","useLayoutClasses","__experimentaluseLayoutStyles","useLayoutStyles","VisualEditorGlobalKeyboardShortcuts","editorStore","useSelect","__unstableMotion","motion","useEffect","useRef","useMemo","useMergeRefs","EditorHeading","FooterSlot","MaybeIframe","_ref","children","contentRef","shouldIframe","styles","style","ref","createElement","Fragment","className","flex","tabIndex","width","height","display","name","VisualEditor","_ref2","deviceType","isWelcomeGuideVisible","isTemplateMode","postContentAttributes","editedPostTemplate","wrapperBlockName","wrapperUniqueId","select","isFeatureActive","getCurrentPostId","getCurrentPostType","getEditorSettings","_isTemplateMode","_wrapperBlockName","editorSettings","undefined","isBlockBasedTheme","__unstableIsBlockBasedTheme","isCleanNewPost","hasMetaBoxes","themeHasDisabledLayoutStyles","themeSupportsLayout","_settings","getSettings","disableLayoutStyles","supportsLayout","isFocusMode","focusMode","desktopCanvasStyles","margin","flexFlow","background","templateModeStyles","borderRadius","border","borderBottom","resizedCanvasStyles","globalLayoutSettings","previewMode","toLowerCase","animatedStyles","paddingBottom","blockSelectionClearerRef","fallbackLayout","type","newestPostContentAttributes","content","blocks","getPostContentAttributes","parseableContent","parse","layout","postContentLayoutClasses","blockListLayoutClass","postContentLayoutStyles","postContentLayout","inherit","contentSize","wideSize","blockListLayout","titleRef","_titleRef$current","current","focus","css","__unstableContentRef","div","animate","padding","initial","selector","layoutDefinitions","definitions","Slot","mode","blockName","uniqueId","__experimentalLayout"],"sources":["../../../src/components/block-editor/visual-editor.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tWritingFlow,\n\tBlockList,\n\tBlockTools,\n\tstore as blockEditorStore,\n\t__unstableUseBlockSelectionClearer as useBlockSelectionClearer,\n\t__unstableUseTypewriter as useTypewriter,\n\t__unstableUseClipboardHandler as useClipboardHandler,\n\t__unstableUseTypingObserver as useTypingObserver,\n\t__experimentalUseResizeCanvas as useResizeCanvas,\n\t__unstableEditorStyles as EditorStyles,\n\tuseSetting,\n\t__experimentalLayoutStyle as LayoutStyle,\n\t__unstableUseMouseMoveTypingReset as useMouseMoveTypingReset,\n\t__unstableIframe as Iframe,\n\t__experimentalRecursionProvider as RecursionProvider,\n\t__experimentaluseLayoutClasses as useLayoutClasses,\n\t__experimentaluseLayoutStyles as useLayoutStyles,\n} from '@wordpress/block-editor';\nimport {\n\tVisualEditorGlobalKeyboardShortcuts,\n\tstore as editorStore,\n} from '@wordpress/editor';\nimport { useSelect } from '@wordpress/data';\nimport { __unstableMotion as motion } from '@wordpress/components';\nimport { useEffect, useRef, useMemo } from '@wordpress/element';\nimport { useMergeRefs } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport EditorHeading from '../editor-heading-slot';\nimport FooterSlot from '../footer-slot';\n\nfunction MaybeIframe( { children, contentRef, shouldIframe, styles, style } ) {\n\tconst ref = useMouseMoveTypingReset();\n\n\tif ( !shouldIframe ) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<EditorStyles styles={ styles } />\n\t\t\t\t<WritingFlow\n\t\t\t\t\tref={ contentRef }\n\t\t\t\t\tclassName=\"editor-styles-wrapper\"\n\t\t\t\t\tstyle={ { flex: '1', ...style } }\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</WritingFlow>\n\t\t\t</>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Iframe\n\t\t\tref={ ref }\n\t\t\tcontentRef={ contentRef }\n\t\t\tstyle={ { width: '100%', height: '100%', display: 'block' } }\n\t\t\tname=\"editor-canvas\"\n\t\t>\n\t\t\t<EditorStyles styles={ styles } />\n\t\t\t{ children }\n\t\t</Iframe>\n\t);\n}\n\n/**\n * This is a copy of packages/edit-post/src/components/visual-editor/index.js\n *\n * The original is not exported, and contains code for post titles\n *\n * @param {Object} args\n * @param args.styles\n */\nexport default function VisualEditor( { styles } ) {\n\tconst {\n\t\tdeviceType,\n\t\tisWelcomeGuideVisible,\n\t\tisTemplateMode,\n\t\tpostContentAttributes,\n\t\teditedPostTemplate = {},\n\t\twrapperBlockName,\n\t\twrapperUniqueId,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tisFeatureActive,\n\t\t} = select( 'isolated/editor' );\n\t\t// @ts-ignore\n\t\tconst { getCurrentPostId, getCurrentPostType, getEditorSettings } =\n\t\t\tselect( editorStore );\n\t\tconst _isTemplateMode = false;\n\t\tlet _wrapperBlockName;\n\n\t\tif ( getCurrentPostType() === 'wp_block' ) {\n\t\t\t_wrapperBlockName = 'core/block';\n\t\t} else if ( !_isTemplateMode ) {\n\t\t\t_wrapperBlockName = 'core/post-content';\n\t\t}\n\n\t\tconst editorSettings = getEditorSettings();\n\n\t\treturn {\n\t\t\tdeviceType: 'Desktop',\n\t\t\t// @ts-ignore\n\t\t\tisWelcomeGuideVisible: isFeatureActive( 'welcomeGuide' ),\n\t\t\tisTemplateMode: _isTemplateMode,\n\t\t\tpostContentAttributes: getEditorSettings().postContentAttributes,\n\t\t\t// Post template fetch returns a 404 on classic themes, which\n\t\t\t// messes with e2e tests, so check it's a block theme first.\n\t\t\teditedPostTemplate: undefined,\n\t\t\twrapperBlockName: _wrapperBlockName,\n\t\t\twrapperUniqueId: getCurrentPostId(),\n\t\t\tisBlockBasedTheme: editorSettings.__unstableIsBlockBasedTheme,\n\t\t};\n\t}, [] );\n\t// @ts-ignore\n\tconst { isCleanNewPost } = useSelect( editorStore );\n\tconst hasMetaBoxes = false;\n\tconst { themeHasDisabledLayoutStyles, themeSupportsLayout } =\n\t\tuseSelect( ( select ) => {\n\t\t\t// @ts-ignore\n\t\t\tconst _settings = select( blockEditorStore ).getSettings();\n\t\t\treturn {\n\t\t\t\tthemeHasDisabledLayoutStyles: _settings.disableLayoutStyles,\n\t\t\t\tthemeSupportsLayout: _settings.supportsLayout,\n\t\t\t\tisFocusMode: _settings.focusMode,\n\t\t\t};\n\t\t}, [] );\n\tconst desktopCanvasStyles = {\n\t\theight: '100%',\n\t\twidth: '100%',\n\t\tmargin: 0,\n\t\tdisplay: 'flex',\n\t\tflexFlow: 'column',\n\t\t// Default background color so that grey\n\t\t// .edit-post-editor-regions__content color doesn't show through.\n\t\tbackground: 'white',\n\t};\n\tconst templateModeStyles = {\n\t\t...desktopCanvasStyles,\n\t\tborderRadius: '2px 2px 0 0',\n\t\tborder: '1px solid #ddd',\n\t\tborderBottom: 0,\n\t};\n\tconst resizedCanvasStyles = useResizeCanvas( deviceType, isTemplateMode );\n\tconst globalLayoutSettings = useSetting( 'layout' );\n\tconst previewMode = 'is-' + deviceType.toLowerCase() + '-preview';\n\n\tlet animatedStyles = isTemplateMode\n\t\t? templateModeStyles\n\t\t: desktopCanvasStyles;\n\tif ( resizedCanvasStyles ) {\n\t\tanimatedStyles = resizedCanvasStyles;\n\t}\n\n\tlet paddingBottom;\n\n\t// Add a constant padding for the typewritter effect. When typing at the\n\t// bottom, there needs to be room to scroll up.\n\tif ( !hasMetaBoxes && !resizedCanvasStyles && !isTemplateMode ) {\n\t\tpaddingBottom = '40vh';\n\t}\n\n\tconst ref = useRef();\n\tconst contentRef = useMergeRefs( [\n\t\tref,\n\t\tuseClipboardHandler(),\n\t\tuseTypewriter(),\n\t\tuseTypingObserver(),\n\t\tuseBlockSelectionClearer(),\n\t] );\n\n\tconst blockSelectionClearerRef = useBlockSelectionClearer();\n\n\t// fallbackLayout is used if there is no Post Content,\n\t// and for Post Title.\n\tconst fallbackLayout = useMemo( () => {\n\t\tif ( isTemplateMode ) {\n\t\t\treturn { type: 'default' };\n\t\t}\n\n\t\tif ( themeSupportsLayout ) {\n\t\t\t// We need to ensure support for wide and full alignments,\n\t\t\t// so we add the constrained type.\n\t\t\treturn { ...globalLayoutSettings, type: 'constrained' };\n\t\t}\n\t\t// Set default layout for classic themes so all alignments are supported.\n\t\treturn { type: 'default' };\n\t}, [ isTemplateMode, themeSupportsLayout, globalLayoutSettings ] );\n\n\tconst newestPostContentAttributes = useMemo( () => {\n\t\t// @ts-ignore\n\t\tif ( !editedPostTemplate?.content && !editedPostTemplate?.blocks ) {\n\t\t\treturn postContentAttributes;\n\t\t}\n\t\t// When in template editing mode, we can access the blocks directly.\n\t\t// @ts-ignore\n\t\tif ( editedPostTemplate?.blocks ) {\n\t\t\t// @ts-ignore\n\t\t\treturn getPostContentAttributes( editedPostTemplate?.blocks );\n\t\t}\n\t\t// If there are no blocks, we have to parse the content string.\n\t\t// Best double-check it's a string otherwise the parse function gets unhappy.\n\t\t// @ts-ignore\n\t\tconst parseableContent = typeof editedPostTemplate?.content === 'string' ? editedPostTemplate?.content : '';\n\n\t\t// @ts-ignore\n\t\treturn getPostContentAttributes( parse( parseableContent ) ) || {};\n\t}, [\n\t\t// @ts-ignore\n\t\teditedPostTemplate?.content,\n\t\t// @ts-ignore\n\t\teditedPostTemplate?.blocks,\n\t\tpostContentAttributes,\n\t] );\n\n\tconst layout = newestPostContentAttributes?.layout || {};\n\n\tconst postContentLayoutClasses = useLayoutClasses(\n\t\tnewestPostContentAttributes,\n\t\t'core/post-content'\n\t);\n\n\tconst blockListLayoutClass = classnames(\n\t\t{\n\t\t\t'is-layout-flow': !themeSupportsLayout,\n\t\t},\n\t\tthemeSupportsLayout && postContentLayoutClasses\n\t);\n\n\tconst postContentLayoutStyles = useLayoutStyles(\n\t\tnewestPostContentAttributes,\n\t\t'core/post-content',\n\t\t'.block-editor-block-list__layout.is-root-container'\n\t);\n\n\t// Update type for blocks using legacy layouts.\n\tconst postContentLayout = useMemo( () => {\n\t\treturn layout &&\n\t\t\t( layout?.type === 'constrained' ||\n\t\t\t\tlayout?.inherit ||\n\t\t\t\tlayout?.contentSize ||\n\t\t\t\tlayout?.wideSize )\n\t\t\t? { ...globalLayoutSettings, ...layout, type: 'constrained' }\n\t\t\t: { ...globalLayoutSettings, ...layout, type: 'default' };\n\t}, [\n\t\tlayout?.type,\n\t\tlayout?.inherit,\n\t\tlayout?.contentSize,\n\t\tlayout?.wideSize,\n\t\tglobalLayoutSettings,\n\t] );\n\n\t// If there is a Post Content block we use its layout for the block list;\n\t// if not, this must be a classic theme, in which case we use the fallback layout.\n\tconst blockListLayout = postContentAttributes\n\t\t? postContentLayout\n\t\t: fallbackLayout;\n\n\tconst titleRef = useRef();\n\tuseEffect( () => {\n\t\tif ( isWelcomeGuideVisible || !isCleanNewPost() ) {\n\t\t\treturn;\n\t\t}\n\t\t// @ts-ignore\n\t\ttitleRef?.current?.focus();\n\t}, [ isWelcomeGuideVisible, isCleanNewPost ] );\n\n\tstyles = useMemo(\n\t\t() => [\n\t\t\t...styles,\n\t\t\t{\n\t\t\t\t// We should move this in to future to the body.\n\t\t\t\tcss:\n\t\t\t\t\t`.edit-post-visual-editor__post-title-wrapper{margin-top:4rem}` +\n\t\t\t\t\t( paddingBottom\n\t\t\t\t\t\t? `body{padding-bottom:${ paddingBottom }}`\n\t\t\t\t\t\t: '' ),\n\t\t\t},\n\t\t],\n\t\t[ styles ]\n\t);\n\n\treturn (\n\t\t<BlockTools\n\t\t\t__unstableContentRef={ ref }\n\t\t\tclassName={ classnames( 'edit-post-visual-editor', {\n\t\t\t\t'is-template-mode': isTemplateMode,\n\t\t\t} ) }\n\t\t>\n\t\t\t<VisualEditorGlobalKeyboardShortcuts />\n\t\t\t<motion.div\n\t\t\t\tclassName=\"edit-post-visual-editor__content-area\"\n\t\t\t\tanimate={ {\n\t\t\t\t\tpadding: isTemplateMode ? '48px 48px 0' : 0,\n\t\t\t\t} }\n\t\t\t\tref={ blockSelectionClearerRef }\n\t\t\t>\n\t\t\t\t<motion.div\n\t\t\t\t\tanimate={ animatedStyles }\n\t\t\t\t\tinitial={ desktopCanvasStyles }\n\t\t\t\t\tclassName={ previewMode }\n\t\t\t\t>\n\t\t\t\t\t<MaybeIframe\n\t\t\t\t\t\tshouldIframe={\n\t\t\t\t\t\t\tisTemplateMode ||\n\t\t\t\t\t\t\tdeviceType === 'Tablet' ||\n\t\t\t\t\t\t\tdeviceType === 'Mobile'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t\t\tstyles={ styles }\n\t\t\t\t\t\tstyle={ {} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ themeSupportsLayout &&\n\t\t\t\t\t\t\t!themeHasDisabledLayoutStyles &&\n\t\t\t\t\t\t\t!isTemplateMode && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<LayoutStyle\n\t\t\t\t\t\t\t\t\t\tselector=\".edit-post-visual-editor__post-title-wrapper, .block-editor-block-list__layout.is-root-container\"\n\t\t\t\t\t\t\t\t\t\tlayout={ fallbackLayout }\n\t\t\t\t\t\t\t\t\t\tlayoutDefinitions={\n\t\t\t\t\t\t\t\t\t\t\tglobalLayoutSettings?.definitions\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ postContentLayoutStyles && (\n\t\t\t\t\t\t\t\t\t\t<LayoutStyle\n\t\t\t\t\t\t\t\t\t\t\tlayout={ postContentLayout }\n\t\t\t\t\t\t\t\t\t\t\tcss={ postContentLayoutStyles }\n\t\t\t\t\t\t\t\t\t\t\tlayoutDefinitions={\n\t\t\t\t\t\t\t\t\t\t\t\tglobalLayoutSettings?.definitions\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t<EditorHeading.Slot mode=\"visual\" />\n\n\t\t\t\t\t\t<RecursionProvider\n\t\t\t\t\t\t\tblockName={ wrapperBlockName }\n\t\t\t\t\t\t\tuniqueId={ wrapperUniqueId }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockList\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tisTemplateMode\n\t\t\t\t\t\t\t\t\t\t? 'wp-site-blocks'\n\t\t\t\t\t\t\t\t\t\t: `${ blockListLayoutClass } wp-block-post-content` // Ensure root level blocks receive default/flow blockGap styling rules.\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t__experimentalLayout={ blockListLayout }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RecursionProvider>\n\n\t\t\t\t\t\t<FooterSlot.Slot mode=\"visual\" />\n\t\t\t\t\t</MaybeIframe>\n\t\t\t\t</motion.div>\n\t\t\t</motion.div>\n\t\t</BlockTools>\n\t);\n};\n"],"mappings":"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"}