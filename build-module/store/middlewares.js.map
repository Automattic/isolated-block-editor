{"version":3,"file":"middlewares.js","names":["refx","preferenceEffects","applyMiddlewares","store","enhancedDispatch","Error","middlewareAPI","getState","dispatch"],"sources":["../../src/store/middlewares.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport refx from 'refx';\n\n/**\n * Internal dependencies\n */\nimport preferenceEffects from './preferences/effects';\n\n/**\n * Applies the custom middlewares used specifically in the editor module.\n *\n * @param {Object} store Store Object.\n *\n * @return {Object} Update Store Object.\n */\nfunction applyMiddlewares( store ) {\n\tlet enhancedDispatch = () => {\n\t\tthrow new Error(\n\t\t\t'Dispatching while constructing your middleware is not allowed. ' +\n\t\t\t\t'Other middleware would not be applied to this dispatch.'\n\t\t);\n\t};\n\n\tconst middlewareAPI = {\n\t\tgetState: store.getState,\n\t\t// @ts-ignore */}\n\t\tdispatch: ( ...args ) => enhancedDispatch( ...args ),\n\t};\n\n\tenhancedDispatch = refx( { ...preferenceEffects } )( middlewareAPI )( store.dispatch );\n\n\tstore.dispatch = enhancedDispatch;\n\treturn store;\n}\n\nexport default applyMiddlewares;\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAP,MAAiB,MAAjB;AAEA;AACA;AACA;;AACA,OAAOC,iBAAP,MAA8B,uBAA9B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,gBAAT,CAA2BC,KAA3B,EAAmC;EAClC,IAAIC,gBAAgB,GAAG,MAAM;IAC5B,MAAM,IAAIC,KAAJ,CACL,oEACC,yDAFI,CAAN;EAIA,CALD;;EAOA,MAAMC,aAAa,GAAG;IACrBC,QAAQ,EAAEJ,KAAK,CAACI,QADK;IAErB;IACAC,QAAQ,EAAE;MAAA,OAAeJ,gBAAgB,CAAE,YAAF,CAA/B;IAAA;EAHW,CAAtB;EAMAA,gBAAgB,GAAGJ,IAAI,CAAE,EAAE,GAAGC;EAAL,CAAF,CAAJ,CAAkCK,aAAlC,EAAmDH,KAAK,CAACK,QAAzD,CAAnB;EAEAL,KAAK,CAACK,QAAN,GAAiBJ,gBAAjB;EACA,OAAOD,KAAP;AACA;;AAED,eAAeD,gBAAf"}