{"version":3,"file":"store-hot-swap.js","names":["storeHotSwapPlugin","registry","pluginOptions","hotStores","dispatch","reducerKey","targetDispatch","indexOf","select","targetSelect","setEditor","resetEditor"],"sources":["../../../src/store/plugins/store-hot-swap.js"],"sourcesContent":["/**\n * Swap any access to `core/block-editor` to the currently focussed editor store. This ensures that blocks that directly access\n * wp.data still work.\n *\n * Note that store plugins are currently marked as deprecated. It's unknown what will replace them, and this will need to be updated\n * once that happens.\n *\n * @param {Object} registry\n * @param {Object} pluginOptions\n */\nfunction storeHotSwapPlugin( registry, pluginOptions ) {\n\tconst hotStores = [ 'core/block-editor', 'core/editor' ];\n\n\t// Switch select and dispatch\n\treturn {\n\t\tdispatch( reducerKey ) {\n\t\t\tif ( storeHotSwapPlugin.targetDispatch === null || hotStores.indexOf( reducerKey ) === -1 ) {\n\t\t\t\treturn registry.dispatch( reducerKey );\n\t\t\t}\n\n\t\t\treturn storeHotSwapPlugin.targetDispatch( reducerKey );\n\t\t},\n\t\tselect( reducerKey ) {\n\t\t\tif ( storeHotSwapPlugin.targetSelect === null || hotStores.indexOf( reducerKey ) === -1 ) {\n\t\t\t\treturn registry.select( reducerKey );\n\t\t\t}\n\n\t\t\treturn storeHotSwapPlugin.targetSelect( reducerKey );\n\t\t},\n\t};\n}\n\nstoreHotSwapPlugin.targetSelect = null;\nstoreHotSwapPlugin.targetDispatch = null;\n\nstoreHotSwapPlugin.setEditor = function ( select, dispatch ) {\n\tthis.targetSelect = select;\n\tthis.targetDispatch = dispatch;\n};\n\nstoreHotSwapPlugin.resetEditor = function () {\n\tthis.targetSelect = null;\n\tthis.targetDispatch = null;\n};\n\nexport default storeHotSwapPlugin;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,kBAAkB,CAAEC,QAAQ,EAAEC,aAAa,EAAG;EACtD,MAAMC,SAAS,GAAG,CAAE,mBAAmB,EAAE,aAAa,CAAE;;EAExD;EACA,OAAO;IACNC,QAAQ,CAAEC,UAAU,EAAG;MACtB,IAAKL,kBAAkB,CAACM,cAAc,KAAK,IAAI,IAAIH,SAAS,CAACI,OAAO,CAAEF,UAAU,CAAE,KAAK,CAAC,CAAC,EAAG;QAC3F,OAAOJ,QAAQ,CAACG,QAAQ,CAAEC,UAAU,CAAE;MACvC;MAEA,OAAOL,kBAAkB,CAACM,cAAc,CAAED,UAAU,CAAE;IACvD,CAAC;IACDG,MAAM,CAAEH,UAAU,EAAG;MACpB,IAAKL,kBAAkB,CAACS,YAAY,KAAK,IAAI,IAAIN,SAAS,CAACI,OAAO,CAAEF,UAAU,CAAE,KAAK,CAAC,CAAC,EAAG;QACzF,OAAOJ,QAAQ,CAACO,MAAM,CAAEH,UAAU,CAAE;MACrC;MAEA,OAAOL,kBAAkB,CAACS,YAAY,CAAEJ,UAAU,CAAE;IACrD;EACD,CAAC;AACF;AAEAL,kBAAkB,CAACS,YAAY,GAAG,IAAI;AACtCT,kBAAkB,CAACM,cAAc,GAAG,IAAI;AAExCN,kBAAkB,CAACU,SAAS,GAAG,UAAWF,MAAM,EAAEJ,QAAQ,EAAG;EAC5D,IAAI,CAACK,YAAY,GAAGD,MAAM;EAC1B,IAAI,CAACF,cAAc,GAAGF,QAAQ;AAC/B,CAAC;AAEDJ,kBAAkB,CAACW,WAAW,GAAG,YAAY;EAC5C,IAAI,CAACF,YAAY,GAAG,IAAI;EACxB,IAAI,CAACH,cAAc,GAAG,IAAI;AAC3B,CAAC;AAED,eAAeN,kBAAkB"}